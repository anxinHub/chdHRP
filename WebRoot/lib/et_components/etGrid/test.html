<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <script src="../../jquery/jquery-1.9.1.min.js"></script>
    <script src="../../jqueryui/jquery-ui.min.js"></script>

    <link rel="stylesheet" href="./css/pqgrid.min.css">

    <script src="./js/pqgrid.dev.js"></script>
    <script src="./etGrid.js"></script>
</head>
<body>
    <div id="grid"></div>
    <script>
        var data = [
            { "id": 0000, "text": "AAAA", "new": "小aaaaa" },
            { "id": 1111, "text": "BBBB", "new": "小bbbbb" },
            { "id": 2222, "text": "CCCC" },
            { "id": 3333, "text": "DDDD" },
            { "id": 4444, "text": "AAAA" },
            { "id": 1111, "text": "BBBB" },
            { "id": 2222, "text": "CCCC" },
            { "id": 3333, "text": "DDDD" },
            { "id": 0000, "text": "AAAA" },
            { "id": 0000, "text": "AAAA" },
            { "id": 0000, "text": "AAAA" },
            { "id": 0000, "text": "AAAA" },
            { "id": 0000, "text": "AAAA" }
        ];

        var gridParam = {
            // editable: true,
            numberCell: {
                show: true
            },
            // pageModel: {
            //     rPP: 5
            // },
            checkbox: true,
            // stripeRows: false,
            // resizable: false,
            height: 500,
            width: 800,
            // addRowByKey: false,

            hoverShowTitle: function (ui) {
                if (ui.rowIndx < 5) {
                    return false;
                } else {
                    return {
                        // id: 'hahah' + ui.rowData.id,
                        // text: ui.rowData.new ? ui.rowData.new : '...'
                        id: 'hahah',
                        text: 'hahah'
                    }
                }
            }
        };
        gridParam.columns = [
            {
                display: "ID",
                name: "id",
                width: 200
            },
            {
                display: "TEXT",
                name: "text",
                width: 200,
                editor: {
                    type: "text",
                    // source: [
                    //  { id: 1, label: "abc", text: "abc" },
                    //  { id: 2, label: "def", text: "def" },
                    //  { id: 3, label: "ghj", text: "ghj" }
                    // ],
                    // change: function (rowData, cellData, setting) {
                    //  console.log(rowData, cellData, setting)
                    // },
                    // create: function () {}
                }
                // editable: function (ui) {
                //  var rowData = ui.rowData;
                //  console.log(rowData)
                //  if (rowData) {
                //      if (rowData.id == 0) {
                //          return true;
                //      } else {
                //          return false;
                //      }
                //  } else {
                //      return false;
                //  }
                // }
            }
        ];
        gridParam.dataModel = {
            data: data,
            location: 'local'
        };
        // gridParam.selectionModel = {
        //     type: "row",
        //     mode: "single"
        // };
        gridParam.toolbar = {
            items: [
                { type: 'button', label: '添加',
                    listeners: [
                        {
                            click: function () {
                                grid.addRow()
                                // grid.setSelection(6, true, true)
                            }
                        }
                    ]
                },
                { type: 'button', label: '动态表头',
                    listeners: [
                        {
                            click: function () {
                                var newCol = [{
                                    title: 'New',
                                    dataIndx: "new",
                                    dataType: 'string',
                                    width: 200
                                }]
                                grid.option('columns', newCol);
                                grid.refresh();
                                // console.log(grid.option)
                                // console.log(grid.getColumns())
                                // grid.setSelection(6, true, true)
                            }
                        }
                    ]
                }
            ]
        }

        grid = $("#grid").etGrid(gridParam);

    </script>
</body>
</html>