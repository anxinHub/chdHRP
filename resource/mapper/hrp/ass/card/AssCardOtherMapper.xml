<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chd.hrp.ass.dao.card.AssCardOtherMapper">
	 
	<resultMap id="assCardOther" type="com.chd.hrp.ass.entity.card.AssCardOther">  
	<result property="group_id" column="group_id"/>
	<result property="hos_id" column="hos_id"/> 
	<result property="copy_code" column="copy_code"/>
	<result property="ass_card_no" column="ass_card_no"/>  
	<result property="ass_ori_card_no" column="ass_ori_card_no"/>
	<result property="ass_id" column="ass_id"/>  
	<result property="ass_no" column="ass_no"/>
	<result property="gb_code" column="gb_code"/>
	<result property="ass_spec" column="ass_spec"/>
	<result property="ass_mondl" column="ass_mondl"/>
	<result property="ass_brand" column="ass_brand"/>
	<result property="ass_amount" column="ass_amount"/>
	<result property="unit_code" column="unit_code"/> 
	<result property="fac_id" column="fac_id"/>
	<result property="fac_no" column="fac_no"/>
	<result property="ven_id" column="ven_id"/>
	<result property="ven_no" column="ven_no"/>
	<result property="is_dept" column="is_dept"/>
	<result property="dept_id" column="dept_id"/>
	<result property="dept_no" column="dept_no"/>
	<result property="store_id" column="store_id"/>
	<result property="store_no" column="store_no"/>
	<result property="price" column="price"/>
	<result property="depre_money" column="depre_money"/>
	<result property="manage_depre_money" column="manage_depre_money"/>
	<result property="cur_money" column="cur_money"/>
	<result property="fore_money" column="fore_money"/>
	<result property="buy_type" column="buy_type"/>
	<result property="use_state" column="use_state"/>
	<result property="is_depr" column="is_depr"/>
	<result property="depr_method" column="depr_method"/>
	<result property="acc_depre_amount" column="acc_depre_amount"/>
	<result property="is_manage_depre" column="is_manage_depre"/>
	<result property="manage_depr_method" column="manage_depr_method"/>
	<result property="manage_depre_amount" column="manage_depre_amount"/>
	<result property="is_measure" column="is_measure"/>
	<result property="is_throw" column="is_throw"/>
	<result property="pact_code" column="pact_code"/>
	<result property="contract_code" column="contract_code"/>
	<result property="file_number" column="file_number"/>
	<result property="ins_money" column="ins_money"/>
	<result property="ins_date" column="ins_date"/>
	<result property="accept_emp" column="accept_emp"/>
	<result property="accept_date" column="accept_date"/>
	<result property="service_date" column="service_date"/>
	<result property="ass_seq_no" column="ass_seq_no"/>
	<result property="location" column="location"/>
	<result property="note" column="note"/>
	<result property="ass_in_no" column="ass_in_no"/>
	<result property="in_date" column="in_date"/>
	<result property="run_date" column="run_date"/>
	<result property="is_bar" column="is_bar"/>
	<result property="bar_type" column="bar_type"/>
	<result property="bar_code" column="bar_code"/>
	<result property="bar_url" column="bar_url"/>
	<result property="book_amount" column="book_amount"/>
	<result property="relic_amount" column="relic_amount"/>
	<result property="relic_grade_code" column="relic_grade_code"/>
	<result property="is_init" column="is_init"/>
	<result property="dispose_type" column="dispose_type" />
	<result property="dispose_cost" column="dispose_cost" />
	<result property="dispose_income" column="dispose_income" />
	<result property="dispose_tax" column="dispose_tax" />
	<result property="ass_purpose" column="ass_purpose" />
	<result property="proj_id" column="proj_id" />
	<result property="proj_no" column="proj_no" />
	<result property="is_bar_print" column="is_bar_print" />
	<result property="simple_name" column="simple_name" />
	<result property="production_date" column="production_date" />
	<result property="common_name" column="common_name" />
	</resultMap>
		
	<resultMap id="assCardOtherMap" type="java.util.Map">
		<result property="id" column="id"/>	
		<result property="group_id" column="group_id"/>
		<result property="hos_id" column="hos_id"/>
		<result property="copy_code" column="copy_code"/>
		<result property="ass_card_no" column="ass_card_no"/>
		<result property="ass_ori_card_no" column="ass_ori_card_no"/>
		<result property="ass_id" column="ass_id"/>
		<result property="ass_no" column="ass_no"/>
		<result property="gb_code" column="gb_code"/>
		<result property="ass_spec" column="ass_spec"/>
		<result property="ass_mondl" column="ass_mondl"/>
		<result property="ass_brand" column="ass_brand"/>
		<result property="ass_amount" column="ass_amount"/>
		<result property="unit_code" column="unit_code"/>
		<result property="fac_id" column="fac_id"/>
		<result property="fac_no" column="fac_no"/>
		<result property="ven_id" column="ven_id"/>
		<result property="ven_no" column="ven_no"/>
		<result property="is_dept" column="is_dept"/>
		<result property="dept_id" column="dept_id"/>
		<result property="dept_no" column="dept_no"/>
		<result property="store_id" column="store_id"/>
		<result property="store_no" column="store_no"/>
		<result property="price" column="price"/>
		<result property="depre_money" column="depre_money"/>
		<result property="manage_depre_money" column="manage_depre_money"/>
		<result property="cur_money" column="cur_money"/>
		<result property="fore_money" column="fore_money"/>
		<result property="buy_type" column="buy_type"/>
		<result property="use_state" column="use_state"/>
		<result property="is_depr" column="is_depr"/>
		<result property="depr_method" column="depr_method"/>
		<result property="acc_depre_amount" column="acc_depre_amount"/>
		<result property="is_manage_depre" column="is_manage_depre"/>
		<result property="manage_depr_method" column="manage_depr_method"/>
		<result property="manage_depre_amount" column="manage_depre_amount"/>
		<result property="is_measure" column="is_measure"/>
		<result property="is_throw" column="is_throw"/>
		<result property="pact_code" column="pact_code"/>
		<result property="contract_code" column="contract_code"/>
		<result property="file_number" column="file_number"/>
		<result property="ins_money" column="ins_money"/>
		<result property="ins_date" column="ins_date"/>
		<result property="accept_emp" column="accept_emp"/>
		<result property="accept_date" column="accept_date"/>
		<result property="service_date" column="service_date"/>
		<result property="ass_seq_no" column="ass_seq_no"/>
		<result property="location" column="location"/>
		<result property="note" column="note"/>
		<result property="ass_in_no" column="ass_in_no"/>
		<result property="in_date" column="in_date"/>
		<result property="run_date" column="run_date"/>
		<result property="is_bar" column="is_bar"/>
		<result property="bar_type" column="bar_type"/>
		<result property="bar_code" column="bar_code"/>
		<result property="bar_url" column="bar_url"/>
		<result property="book_amount" column="book_amount"/>
		<result property="relic_amount" column="relic_amount"/>
		<result property="relic_grade_code" column="relic_grade_code"/>
		<result property="is_init" column="is_init"/>
		<result property="dispose_type" column="dispose_type" />
		<result property="dispose_cost" column="dispose_cost" />
		<result property="dispose_income" column="dispose_income" />
		<result property="dispose_tax" column="dispose_tax" />
		<result property="ass_purpose" column="ass_purpose" />
		<result property="proj_id" column="proj_id" />
		<result property="proj_no" column="proj_no" />
		<result property="dispose_date" column="dispose_date" />
		<result property="apply_date" column="apply_date" />
		<result property="add_depre_month" column="add_depre_month" />
		<result property="add_manage_month" column="add_manage_month" />
		<result property="is_bar_print" column="is_bar_print" />
		<result property="simple_name" column="simple_name" />
		<result property="production_date" column="production_date" />
		<result property="common_name" column="common_name" />
	</resultMap>
	<insert id="add" useGeneratedKeys="true" >
	
		INSERT INTO ASS_CARD_Other (
		<trim suffix="" suffixOverrides=",">
		<if test="group_id != null and group_id != ''">
		group_id
		,
		</if>
		<if test="hos_id != null and hos_id != ''">
		hos_id
		,
		</if>
		<if test="copy_code != null and copy_code != ''">
		copy_code
		,
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		ass_card_no
		,
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		ass_ori_card_no
		,
		</if>
		<if test="ass_id != null and ass_id != ''">
		ass_id
		,
		</if>
		<if test="ass_no != null and ass_no != ''">
		ass_no
		,
		</if>
		<if test="gb_code != null and gb_code != ''">
		gb_code
		,
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		ass_spec
		,
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		ass_mondl
		,
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		ass_brand
		,
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		ass_amount
		,
		</if>
		<if test="unit_code != null and unit_code != ''">
		unit_code
		,
		</if>
		<if test="fac_no != null and fac_no != ''">
		fac_no
		,
		</if>
		<if test="fac_id != null and fac_id != ''">
		fac_id
		,
		</if>
		<if test="ven_id != null and ven_id != '' ">
		ven_id
		,
		</if>
		<if test="ven_no != null and ven_no != '' ">
		ven_no
		,
		</if>
		<if test="is_dept != null and is_dept != ''">
		is_dept
		,
		</if>
		<if test="dept_id != null and dept_id != ''">
		dept_id
		,
		</if>
		<if test="dept_no != null and dept_no != ''">
		dept_no
		,
		</if>
		<if test="store_id != null and store_id != ''">
		store_id
		,
		</if>
		<if test="store_no != null and store_no != ''">
		store_no
		,
		</if>
		<if test="price != null and price != ''">
		price
		,
		</if>
		<if test="depre_money != null and depre_money != ''">
		depre_money
		,
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		manage_depre_money
		,
		</if>
		<if test="cur_money != null and cur_money != ''">
		cur_money
		,
		</if>
		<if test="fore_money != null and fore_money != ''">
		fore_money
		,
		</if>
		<if test="buy_type != null and buy_type != ''">
		buy_type
		,
		</if>
		<if test="use_state != null and use_state != ''">
		use_state
		,
		</if>
		<if test="is_depr != null and is_depr != ''">
		is_depr
		,
		</if>
		<if test="depr_method != null and depr_method != ''">
		depr_method
		,
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		acc_depre_amount
		,
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		is_manage_depre
		,
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		manage_depr_method
		,
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		manage_depre_amount
		,
		</if>
		<if test="is_measure != null and is_measure != ''">
		is_measure
		,
		</if>
		<if test="is_throw != null and is_throw != ''">
		is_throw
		,
		</if>
		<if test="pact_code != null and pact_code != ''">
		pact_code
		,
		</if>
		<if test="contract_code != null and contract_code != ''">
		contract_code
		,
		</if>
		<if test="file_number != null and file_number != ''">
		file_number
		,
		</if>
		<if test="ins_money != null and ins_money != ''">
		ins_money
		,
		</if>
		<if test="ins_date != null and ins_date != ''">
		ins_date
		,
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		accept_emp
		,
		</if>
		<if test="accept_date != null and accept_date != ''">
		accept_date
		,
		</if>
		<if test="service_date != null and service_date != ''">
		service_date
		,
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		ass_seq_no
		,
		</if>
		<if test="location != null and location != ''">
		location
		,
		</if>
		<if test="note != null and note != ''">
		note
		,
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		ass_in_no
		,
		</if>
		<if test="in_date != null and in_date != ''">
		in_date
		,
		</if>
		<if test="run_date != null and run_date != ''">
		run_date
		,
		</if>
		<if test="is_bar != null and is_bar != ''">
		is_bar
		,
		</if>
		<if test="bar_type != null and bar_type != ''">
		bar_type
		,
		</if>
		<if test="bar_code != null and bar_code != ''">
		bar_code
		,
		</if>
		<if test="bar_url != null and bar_url != ''">
		bar_url
		,
		</if>
		<if test="book_amount != null and book_amount != ''">
		book_amount
		,
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		relic_amount
		,
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		relic_grade_code
		,
		</if>
		<if test="is_init != null and is_init != ''">
		is_init
		,
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		dispose_type
		,
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		dispose_cost
		,
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		dispose_income
		,
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		dispose_tax
		,
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		ass_purpose
		,
		</if>
		<if test="proj_id != null and proj_id != ''">
		proj_id
		,
		</if>
		<if test="proj_no != null and proj_no != ''">
		proj_no
		,
		</if>
		<if test="dispose_date != null and dispose_date != ''">
		dispose_date
		,
		</if>
		<if test="apply_date != null and apply_date != ''">
		apply_date
		,
		</if>
		<if test="add_depre_month != null and add_depre_month != ''">
		add_depre_month
		,
		</if>
		<if test="add_manage_month != null and add_manage_month != ''">
		add_manage_month
		,
		</if>
		<if test="reg_no != null and reg_no != ''">
		reg_no
		,
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		is_bar_print
		,
		</if>
		<if test="measure_type != null and measure_type != ''">
		measure_type
		,
		</if>
		<if test="measure_king_code != null and measure_king_code != ''">
		measure_king_code
		,
		</if>
		<if test="simple_name != null and simple_name != ''">
		simple_name
		,
		</if>
		<if test="production_date != null and production_date != ''">
		production_date
		,
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		proc_store_id
		,
		</if>
		<if test="proc_store_no != null and proc_store_no != ''">
		proc_store_no
		,
		</if>
		<if test="common_name != null and common_name != ''">
		common_name
		,
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		six_type_code
		,
		</if>
		</trim>
		) VALUES (
		<trim suffix="" suffixOverrides=",">
		<if test="group_id != null and group_id != ''">
		to_number(#{group_id})
		,
		</if>
		<if test="hos_id != null and hos_id != ''">
		to_number(#{hos_id})
		,
		</if>
		<if test="copy_code != null and copy_code != ''">
		#{copy_code}
		,
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		#{ass_card_no}
		,
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		#{ass_ori_card_no}
		,
		</if>
		<if test="ass_id != null and ass_id != ''">
		to_number(#{ass_id})
		,
		</if>
		<if test="ass_no != null and ass_no != ''">
		to_number(#{ass_no})
		,
		</if>
		<if test="gb_code != null and gb_code != ''">
		#{gb_code}
		,
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		#{ass_spec}
		,
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		#{ass_mondl}
		,
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		#{ass_brand}
		,
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		to_number(#{ass_amount})
		,
		</if>
		<if test="unit_code != null and unit_code != ''">
		#{unit_code}
		,
		</if>
		<if test="fac_no != null and fac_no != ''">
		to_number(#{fac_no})
		,
		</if>
		<if test="fac_id != null and fac_id != ''">
		to_number(#{fac_id})
		,
		</if>
		<if test="ven_id != null and ven_id != '' ">
		to_number(#{ven_id})
		,
		</if>
		<if test="ven_no != null and ven_no != '' ">
		to_number(#{ven_no})
		,
		</if>
		<if test="is_dept != null and is_dept != ''">
		to_number(#{is_dept})
		,
		</if>
		<if test="dept_id != null and dept_id != ''">
		to_number(#{dept_id})
		,
		</if>
		<if test="dept_no != null and dept_no != ''">
		to_number(#{dept_no})
		,
		</if>
		<if test="store_id != null and store_id != ''">
		to_number(#{store_id})
		,
		</if>
		<if test="store_no != null and store_no != ''">
		to_number(#{store_no})
		,
		</if>
		<if test="price != null and price != ''">
		to_number(#{price})
		,
		</if>
		<if test="depre_money != null and depre_money != ''">
		to_number(#{depre_money})
		,
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		to_number(#{manage_depre_money})
		,
		</if>
		<if test="cur_money != null and cur_money != ''">
		to_number(#{cur_money})
		,
		</if>
		<if test="fore_money != null and fore_money != ''">
		to_number(#{fore_money})
		,
		</if>
		<if test="buy_type != null and buy_type != ''">
		#{buy_type}
		,
		</if>
		<if test="use_state != null and use_state != ''">
		to_number(#{use_state})
		,
		</if>
		<if test="is_depr != null and is_depr != ''">
		to_number(#{is_depr})
		,
		</if>
		<if test="depr_method != null and depr_method != ''">
		#{depr_method}
		,
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		to_number(#{acc_depre_amount})
		,
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		to_number(#{is_manage_depre})
		,
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		#{manage_depr_method}
		,
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		to_number(#{manage_depre_amount})
		,
		</if>
		<if test="is_measure != null and is_measure != ''">
		to_number(#{is_measure})
		,
		</if>
		<if test="is_throw != null and is_throw != ''">
		to_number(#{is_throw})
		,
		</if>
		<if test="pact_code != null and pact_code != ''">
		#{pact_code}
		,
		</if>
		<if test="contract_code != null and contract_code != ''">
		#{contract_code}
		,
		</if>
		<if test="file_number != null and file_number != ''">
		#{file_number}
		,
		</if>
		<if test="ins_money != null and ins_money != ''">
		to_number(#{ins_money})
		,
		</if>
		<if test="ins_date != null and ins_date != ''">
		to_date (#{ins_date},'YYYY-MM-DD')
		,
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		to_number(#{accept_emp})
		,
		</if>
		<if test="accept_date != null and accept_date != ''">
		to_date (#{accept_date},'YYYY-MM-DD')
		,
		</if>
		<if test="service_date != null and service_date != ''">
		to_date (#{service_date},'YYYY-MM-DD')
		,
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		#{ass_seq_no}
		,
		</if>
		<if test="location != null and location != ''">
		#{location}
		,
		</if>
		<if test="note != null and note != ''">
		#{note}
		,
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		#{ass_in_no}
		,
		</if>
		<if test="in_date != null and in_date != ''">
		to_date (#{in_date},'YYYY-MM-DD')
		,
		</if>
		<if test="run_date != null and run_date != ''">
		to_date (#{run_date},'YYYY-MM-DD')
		,
		</if>
		<if test="is_bar != null and is_bar != ''">
		to_number(#{is_bar})
		,
		</if>
		<if test="bar_type != null and bar_type != ''">
		to_number(#{bar_type})
		,
		</if>
		<if test="bar_code != null and bar_code != ''">
		#{bar_code}
		,
		</if>
		<if test="bar_url != null and bar_url != ''">
		#{bar_url}
		,
		</if>
		<if test="book_amount != null and book_amount != ''">
		#{book_amount}
		,
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		#{relic_amount}
		,
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		#{relic_grade_code}
		,
		</if>
		<if test="is_init != null and is_init != ''">
		to_number(#{is_init})
		,
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		to_number(#{dispose_type})
		,
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		to_number(#{dispose_cost})
		,
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		to_number(#{dispose_income})
		,
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		to_number(#{dispose_tax})
		,
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		#{ass_purpose}
		,
		</if>
		<if test="proj_id != null and proj_id != ''">
		to_number(#{proj_id})
		,
		</if>
		<if test="proj_no != null and proj_no != ''">
		to_number(#{proj_no})
		,
		</if>
		<if test="dispose_date != null and dispose_date != ''">
		to_date (#{dispose_date},'YYYY-MM-DD')
		,
		</if>
		<if test="apply_date != null and apply_date != ''">
		to_date (#{apply_date},'YYYY-MM-DD')
		,
		</if>
		<if test="add_depre_month != null and add_depre_month != ''">
		to_number(#{add_depre_month})
		,
		</if>
		<if test="add_manage_month != null and add_manage_month != ''">
		to_number(#{add_manage_month})
		,
		</if>
		<if test="reg_no != null and reg_no != ''">
		#{reg_no}
		,
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		to_number(#{is_bar_print})
		,
		</if>
		<if test="measure_type != null and measure_type != ''">
		to_number(#{measure_type})
		,
		</if>
		<if test="measure_king_code != null and measure_king_code != ''">
		#{measure_king_code}
		,
		</if>
		<if test="simple_name != null and simple_name != ''">
		#{simple_name}
		,
		</if>
		<if test="production_date != null and production_date != ''">
		to_date (#{production_date},'YYYY-MM-DD')
		,
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		to_number(#{proc_store_id})
		,
		</if>
		<if test="proc_store_no != null and proc_store_no != ''">
		to_number(#{proc_store_no})
		,
		</if>
		<if test="common_name != null and common_name != ''">
		#{common_name}
		,
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		#{six_type_code}
		,
		</if>
		</trim>		
		)
	
	</insert>
	<insert id="addBatch" parameterType="java.util.List" >
	
		INSERT INTO ASS_CARD_Other (
		group_id
		,
		hos_id
		,
		copy_code
		,
		ass_card_no
		,
		ass_ori_card_no
		,
		ass_id
		,
		ass_no
		,
		gb_code
		,
		ass_spec
		,
		ass_mondl
		,
		ass_brand
		,
		ass_amount
		,
		unit_code
		,
		fac_no
		,
		fac_id
		,
		ven_id
		,
		ven_no
		,
		is_dept
		,
		dept_id
		,
		dept_no
		,
		store_id
		,
		store_no
		,
		price
		,
		depre_money
		,
		manage_depre_money
		,
		cur_money
		,
		fore_money
		,
		buy_type
		,
		use_state
		,
		is_depr
		,
		depr_method
		,
		acc_depre_amount
		,
		is_manage_depre
		,
		manage_depr_method
		,
		manage_depre_amount
		,
		is_measure
		,
		is_throw
		,
		pact_code
		,
		contract_code
		,
		file_number
		,
		ins_money
		,
		ins_date
		,
		accept_emp
		,
		accept_date
		,
		service_date
		,
		ass_seq_no
		,
		location
		,
		note
		,
		ass_in_no
		,
		in_date
		,
		run_date
		,
		is_bar
		,
		bar_type
		,
		bar_code
		,
		bar_url
		,
		book_amount
		,
		relic_amount
		,
		relic_grade_code
		,
		is_init
		,
		dispose_type  
		,
		dispose_cost  
		,
		dispose_income
		,
		dispose_tax 
		,
		ass_purpose
		,
		proj_id
		,
		proj_no
		,
		dispose_date
		,
		apply_date
		,
		add_depre_month
		,
		add_manage_month
		,
		reg_no
		,
		is_bar_print
		,
		measure_type
		,
		measure_king_code
		,
		simple_name
		,
		production_date
		,
		proc_store_id
		,
		proc_store_no
		,
		common_name
		,
		six_type_code
		) select  t.* from(
		<foreach collection="list" item="item" index="index" separator=" union all " >
			select 		
			#{item.group_id},  
			#{item.hos_id},
			#{item.copy_code},
			#{item.ass_card_no},
			<if test="item.ass_ori_card_no	        != null and   item.ass_ori_card_no	    != ''"        >#{item.ass_ori_card_no}, </if>
			<if test="item.ass_ori_card_no	        == null or   item.ass_ori_card_no	    == ''"        >null ass_ori_card_no, </if>   
			<if test="item.ass_id	                != null and   item.ass_id	            != ''">#{item.ass_id}, </if>    
			<if test="item.ass_id	                == null or   item.ass_id	            == ''">null ass_id, </if>        
			<if test="item.ass_no	                != null and   item.ass_no	            != ''">#{item.ass_no}, </if>   
			<if test="item.ass_no	                == null or   item.ass_no	            == ''">null ass_no, </if> 
			<if test="item.gb_code	                != null and   item.gb_code	            != ''">#{item.gb_code}, </if>
			<if test="item.gb_code	                == null or   item.gb_code	            == ''">null gb_code, </if>   
			<if test="item.ass_spec	                != null and   item.ass_spec	            != ''">#{item.ass_spec}, </if>
			<if test="item.ass_spec	                == null or   item.ass_spec	            == ''">null ass_spec, </if>   
			<if test="item.ass_mondl	            != null and   item.ass_mondl	        != ''"    >#{item.ass_mondl}, </if>
			<if test="item.ass_mondl	            == null or   item.ass_mondl	        == ''"    >null ass_mondl, </if>   
			<if test="item.ass_brand	            != null and   item.ass_brand	            != ''"    >#{item.ass_brand}, </if>
			<if test="item.ass_brand	            == null or   item.ass_brand	            == ''"    >null ass_brand, </if>
			<if test="item.ass_amount	            != null and   item.ass_amount	        != ''"    >#{item.ass_amount}, </if>
			<if test="item.ass_amount	            == null or   item.ass_amount	        == ''"    >null ass_amount, </if>   
			<if test="item.unit_code	            != null and   item.unit_code	        != ''"    >#{item.unit_code}, </if>
			<if test="item.unit_code	            == null or   item.unit_code	        == ''"    >null unit_code, </if>   
			<if test="item.fac_no	                != null and   item.fac_no	            != ''">#{item.fac_no}, </if>
			<if test="item.fac_no	                == null or   item.fac_no	            == ''">null fac_no, </if>   
			<if test="item.fac_id	                != null and   item.fac_id	            != ''">#{item.fac_id}, </if>
			<if test="item.fac_id	                == null or   item.fac_id	            == ''">null fac_id, </if>   
			<if test="item.ven_id	                != null and   item.ven_id	            != ''">#{item.ven_id}, </if>
			<if test="item.ven_id	                == null or   item.ven_id	            == ''">null ven_id, </if>   
			<if test="item.ven_no	                != null and   item.ven_no	            != ''">#{item.ven_no}, </if>
			<if test="item.ven_no	                == null or   item.ven_no	            == ''">null ven_no, </if>   
			<if test="item.is_dept	                != null and   item.is_dept	            != ''">#{item.is_dept}, </if>
			<if test="item.is_dept	                == null or   item.is_dept	            == ''">null is_dept,	 </if>   
			<if test="item.dept_id	                != null and   item.dept_id	            != ''">#{item.dept_id}, </if>
			<if test="item.dept_id	                == null or   item.dept_id	            == ''">null dept_id, </if>   
			<if test="item.dept_no	                != null and   item.dept_no	            != ''">#{item.dept_no}, </if>
			<if test="item.dept_no	                == null or   item.dept_no	            == ''">null dept_no, </if>   
			<if test="item.store_id	                != null and   item.store_id	            != ''">#{item.store_id}, </if>
			<if test="item.store_id	                == null or   item.store_id	            == ''">null store_id, </if>   
			<if test="item.store_no	                != null and   item.store_no	            != ''">#{item.store_no}, </if> 
			<if test="item.store_no	                == null or   item.store_no	            == ''">null store_no, </if>  
			<if test="item.price	                != null and   item.price	            != ''">#{item.price}, </if>
			<if test="item.price	                == null or   item.price	            == ''">null price, </if>   
			<if test="item.depre_money	            != null and   item.depre_money	        != ''">#{item.depre_money}, </if>
			<if test="item.depre_money	            == null or   item.depre_money	        == ''"    >null depre_money, </if>   
			<if test="item.manage_depre_money	    != null and   item.manage_depre_money  != ''" >#{item.manage_depre_money}, </if>
			<if test="item.manage_depre_money	    == null or   item.manage_depre_money  == ''"             >null manage_depre_money, </if>  
			<if test="item.cur_money	            != null and   item.cur_money	        != ''"    >#{item.cur_money}, </if>
			<if test="item.cur_money	            == null or   item.cur_money	        == ''"    >null cur_money, </if>   
			<if test="item.fore_money	            != null and   item.fore_money	        != ''"    >#{item.fore_money}, </if>
			<if test="item.fore_money	            == null or   item.fore_money	        == ''"    >null fore_money, </if>   
			<if test="item.buy_type	                != null and   item.buy_type	            != ''">#{item.buy_type}, </if>
			<if test="item.buy_type	                == null or   item.buy_type	            == ''">null buy_type, </if>   
			<if test="item.use_state	            != null and   item.use_state	        != ''"    >#{item.use_state}, </if>
			<if test="item.use_state	            == null or   item.use_state	        == ''"    >null use_state, </if>   
			<if test="item.is_depr	                != null and   item.is_depr	            != ''">#{item.is_depr}, </if>
			<if test="item.is_depr	                == null or   item.is_depr	            == ''">null is_depr, </if>   
			<if test="item.depr_method	            != null and   item.depr_method	        != ''"    >#{item.depr_method}, </if>
			<if test="item.depr_method	            == null or   item.depr_method	        == ''"    >null depr_method, </if>   
			<if test="item.acc_depre_amount	        != null and   item.acc_depre_amount	    != ''"        >#{item.acc_depre_amount}, </if>
			<if test="item.acc_depre_amount	        == null or   item.acc_depre_amount	    == ''"        >null acc_depre_amount, </if>   
			<if test="item.is_manage_depre	        != null and   item.is_manage_depre	    != ''"        >#{item.is_manage_depre}, </if>
			<if test="item.is_manage_depre	        == null or   item.is_manage_depre	    == ''"        >null is_manage_depre, </if>   
			<if test="item.manage_depr_method	    != null and   item.manage_depr_method  != ''"             >#{item.manage_depr_method}, </if>
			<if test="item.manage_depr_method	    == null or   item.manage_depr_method  == ''"             >null manage_depr_method, </if>  
			<if test="item.manage_depre_amount	    != null and   item.manage_depre_amount  != ''"            >#{item.manage_depre_amount}, </if>
			<if test="item.manage_depre_amount	    == null or   item.manage_depre_amount  == ''"            >null manage_depre_amount, </if>   
			<if test="item.is_measure	            != null and   item.is_measure	        != ''"    >#{item.is_measure}, </if>   
			<if test="item.is_measure	            == null or   item.is_measure	        == ''"    >null is_measure, </if> 
			<if test="item.is_throw	                != null and   item.is_throw	            != ''">#{item.is_throw}, </if>   
			<if test="item.is_throw	                == null or   item.is_throw	            == ''">null is_throw, </if> 
			<if test="item.pact_code	            != null and   item.pact_code	        != ''"    >#{item.pact_code}, </if>   
			<if test="item.pact_code	            == null or   item.pact_code	        == ''"    >null pact_code, </if> 
			<if test="item.contract_code	            != null and   item.contract_code	        != ''"    >#{item.contract_code}, </if>   
			<if test="item.contract_code	            == null or   item.contract_code	        == ''"    >null contract_code, </if>
			<if test="item.file_number	            != null and   item.file_number	        != ''"    >#{item.file_number}, </if>   
			<if test="item.file_number	            == null or   item.file_number	        == ''"    >null file_number, </if>     
			<if test="item.ins_money	            != null and   item.ins_money	        != ''"    >#{item.ins_money}, </if> 
			<if test="item.ins_money	            == null or   item.ins_money	        == ''"    >null ins_money, </if>   
			<if test="item.ins_date	                != null and   item.ins_date	            != ''">#{item.ins_date}, </if> 
			<if test="item.ins_date	                == null or   item.ins_date	            == ''">null ins_date, </if>   
			<if test="item.accept_emp	            != null and   item.accept_emp	        != ''"    >#{item.accept_emp}, </if>
			<if test="item.accept_emp	            == null or   item.accept_emp	        == ''"    >null accept_emp, </if>   
			<if test="item.accept_date	            != null and   item.accept_date	        != ''"    >#{item.accept_date}, </if>  
			<if test="item.accept_date	            == null or   item.accept_date	        == ''"    >null accept_date, </if>
			<if test="item.service_date	            != null and   item.service_date	        != ''"    >#{item.service_date}, </if> 
			<if test="item.service_date	            == null or   item.service_date	        == ''"    >null service_date, </if>  
			<if test="item.ass_seq_no	            != null and   item.ass_seq_no	        != ''"    >#{item.ass_seq_no}, </if> 
			<if test="item.ass_seq_no	            == null or   item.ass_seq_no	        == ''"    >null ass_seq_no, </if>    
			<if test="item.location	                != null and   item.location	            != ''">#{item.location}, </if>  
			<if test="item.location	                == null or   item.location	            == ''">null location, </if>  
			<if test="item.note	                    != null and   item.note	                != ''">#{item.note}, </if>  
			<if test="item.note	                    == null or   item.note	                == ''">null note, </if>  
			<if test="item.ass_in_no	            != null and   item.ass_in_no	        != ''"    >#{item.ass_in_no}, </if> 
			<if test="item.ass_in_no	            == null or   item.ass_in_no	        == ''"    >null ass_in_no, </if>   
			<if test="item.in_date	                != null and   item.in_date	            != ''">#{item.in_date}, </if> 
			<if test="item.in_date	                == null or   item.in_date	            == ''">null in_date, </if>   
			<if test="item.run_date	                != null and   item.run_date	            != ''">#{item.run_date}, </if>
			<if test="item.run_date	                == null or   item.run_date	            == ''">null run_date, </if>    
			<if test="item.is_bar	                != null and   item.is_bar	            != ''">#{item.is_bar}, </if>
			<if test="item.is_bar	                == null or   item.is_bar	            == ''">null is_bar, </if>   
			<if test="item.bar_type	                != null and   item.bar_type	            != ''">#{item.bar_type}, </if>
			<if test="item.bar_type	                == null or   item.bar_type	            == ''">null bar_type, </if>   
			<if test="item.bar_code	                != null and   item.bar_code	            != ''">#{item.bar_code}, </if>
			<if test="item.bar_code	                == null or   item.bar_code	            == ''">null bar_code, </if>    
			<if test="item.bar_url	                != null and   item.bar_url	            != ''">#{item.bar_url}, </if>
			<if test="item.bar_url	                == null or   item.bar_url	            == ''">null bar_url, </if>
			<if test="item.book_amount	                != null and   item.book_amount	            != ''">#{item.book_amount}, </if>
			<if test="item.book_amount	                == null or   item.book_amount	            == ''">null book_amount, </if>   
			<if test="item.relic_amount	                != null and   item.relic_amount	            != ''">#{item.relic_amount}, </if>
			<if test="item.relic_amount	                == null or   item.relic_amount	            == ''">null relic_amount, </if>   
			<if test="item.relic_grade_code	                != null and   item.relic_grade_code	            != ''">#{item.relic_grade_code}, </if>
			<if test="item.relic_grade_code	                == null or   item.relic_grade_code	            == ''">null relic_grade_code, </if>   
			<if test="item.is_init	                != null and   item.is_init	            != ''">#{item.is_init}, </if>
			<if test="item.is_init	                == null or   item.is_init	            == ''">null is_init, </if>    
			<if test="item.dispose_type	            != null and   item.dispose_type	        != ''"    >#{item.dispose_type}, </if>
			<if test="item.dispose_type	            == null or   item.dispose_type	        == ''"    >null dispose_type,</if>    
			<if test="item.dispose_cost	            != null and   item.dispose_cost	        != ''"    >#{item.dispose_cost}, </if>
			<if test="item.dispose_cost	            == null or   item.dispose_cost	        == ''"    >null dispose_cost, </if>   
			<if test="item.dispose_income	        != null and   item.dispose_income	    != ''"        >#{item.dispose_income}, </if>
			<if test="item.dispose_income	        == null or   item.dispose_income	    == ''"        >null dispose_income, </if>    
			<if test="item.dispose_tax	            != null and   item.dispose_tax	        != ''"    >#{item.dispose_tax}, </if>
			<if test="item.dispose_tax	            == null or   item.dispose_tax	        == ''"    >null dispose_tax, </if>   
			<if test="item.ass_purpose	            != null and   item.ass_purpose	        != ''"    >#{item.ass_purpose}, </if>
			<if test="item.ass_purpose	            == null or   item.ass_purpose	        == ''"    >null ass_purpose, </if>   
			<if test="item.proj_id	                != null and   item.proj_id	            != ''">#{item.proj_id}, </if>
			<if test="item.proj_id	                == null or   item.proj_id	            == ''">null proj_id, </if>    
			<if test="item.proj_no	                != null and   item.proj_no	            != ''">#{item.proj_no}, </if>   
			<if test="item.proj_no	                == null or   item.proj_no	            == ''">null proj_no,</if>   
			<if test="item.dispose_date	                != null and   item.dispose_date	            != ''">#{item.dispose_date}, </if>   
			<if test="item.dispose_date	                == null or   item.dispose_date	            == ''">null dispose_date,</if>   
			<if test="item.apply_date	                != null and   item.apply_date	            != ''">#{item.apply_date}, </if>   
			<if test="item.apply_date	                == null or   item.apply_date	            == ''">null apply_date,</if>
			<if test="item.add_depre_month                != null and   item.add_depre_month	            != ''">#{item.add_depre_month}, </if>   
			<if test="item.add_depre_month	                == null or   item.add_depre_month	            == ''">null add_depre_month,</if>	
			<if test="item.add_manage_month                != null and   item.add_manage_month	            != ''">#{item.add_manage_month}, </if>   
			<if test="item.add_manage_month	                == null or   item.add_manage_month            == ''">null add_manage_month,</if>	
			<if test="item.reg_no                != null and   item.reg_no	            != ''">#{item.reg_no}, </if>   
			<if test="item.reg_no	                == null or   item.reg_no           == ''">null reg_no,</if>	
			<if test="item.is_bar_print              != null and   item.is_bar_print           != ''">#{item.is_bar_print}, </if>   
			<if test="item.is_bar_print                == null or   item.is_bar_print           == ''">null is_bar_print,</if>	
			<if test="item.measure_type              != null and   item.measure_type           != ''">#{item.measure_type}, </if>   
			<if test="item.measure_type                == null or   item.measure_type           == ''">null measure_type,</if>
			
			<if test="item.measure_king_code              != null and   item.measure_king_code           != ''">#{item.measure_king_code}, </if>   
			<if test="item.measure_king_code                == null or   item.measure_king_code           == ''">null measure_king_code,</if>
			
			<if test="item.simple_name             != null and   item.simple_name           != ''">#{item.simple_name}, </if>   
			<if test="item.simple_name               == null or   item.simple_name           == ''">null simple_name,</if>
			
			<if test="item.production_date             != null and   item.production_date           != ''">#{item.production_date}, </if>   
			<if test="item.production_date           == null or   item.production_date           == ''">null production_date,</if>
		
			<if test="item.proc_store_id             != null and   item.proc_store_id         != ''">#{item.proc_store_id}, </if>   
			<if test="item.proc_store_id          == null or   item.proc_store_id        == ''">null proc_store_id,</if>
			
			<if test="item.proc_store_no            != null and   item.proc_store_no         != ''">#{item.proc_store_no}, </if>   
			<if test="item.proc_store_no         == null or   item.proc_store_no       == ''">null proc_store_no,</if>
			
			<if test="item.common_name            != null and   item.common_name         != ''">#{item.common_name}, </if>   
			<if test="item.common_name         == null or   item.common_name       == ''">null common_name,</if>
			
		    <if test="item.six_type_code            != null and   item.six_type_code         != ''">#{item.six_type_code} </if>   
			<if test="item.six_type_code         == null or   item.six_type_code      == ''">null six_type_code</if>
			
		    from dual
		</foreach>
		)t
	</insert>
	
	<update id="update" parameterType="java.util.Map">
	
		UPDATE ass_card_Other 
		<trim prefix="SET"  suffixOverrides=","> 
		ass_ori_card_no = #{ass_ori_card_no}
		,
		<if test="ass_id != null and ass_id != ''">
		ass_id = to_number(#{ass_id})
		,
		</if>
		<if test="ass_no != null and ass_no != ''">
		ass_no = to_number(#{ass_no})
		,
		</if>
		gb_code = #{gb_code}
		,
		ass_spec = #{ass_spec}
		,
		ass_mondl = #{ass_mondl}
		,
		ass_brand = #{ass_brand}
		,
		<if test="ass_amount != null and ass_amount != ''">
		ass_amount = to_number(#{ass_amount})
		,
		</if>
		unit_code = #{unit_code}
		,
		<if test="fac_no != null and fac_no != ''">
		fac_no = to_number(#{fac_no})
		,
		</if>
		<if test="fac_id != null and fac_id != ''">
		fac_id = to_number(#{fac_id})
		,
		</if>
		<if test="ven_id != null and ven_id != ''">
		ven_id = to_number(#{ven_id})
		,
		</if>
		<if test="ven_no != null and ven_no != ''">
		ven_no = to_number(#{ven_no})
		,
		</if>
		<if test="is_dept != null and is_dept != ''">
		is_dept = to_number(#{is_dept})
		,
		</if>
		<if test="dept_id != null and dept_id != ''">
		dept_id = to_number(#{dept_id})
		,
		</if>
		<if test="dept_no != null and dept_no != ''">
		dept_no = to_number(#{dept_no})
		,
		</if>
		<if test="store_id != null and store_id != ''">
		store_id = to_number(#{store_id})
		,
		</if>
		<if test="store_no != null and store_no != ''">
		store_no = to_number(#{store_no})
		,
		</if>
		<if test="price != null and price != ''">
		price = to_number(#{price})
		,
		</if>
		<if test="depre_money != null and depre_money != ''">
		depre_money = to_number(#{depre_money})
		,
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		manage_depre_money = to_number(#{manage_depre_money})
		,
		</if>
		<if test="cur_money != null and cur_money != ''">
		cur_money = to_number(#{cur_money})
		,
		</if>
		<if test="fore_money != null and fore_money != ''">
		fore_money = to_number(#{fore_money})
		,
		</if>
		buy_type = #{buy_type}
		,
		<if test="use_state != null and use_state != ''">
		use_state = to_number(#{use_state})
		,
		</if>
		<if test="is_depr != null and is_depr != ''">
		is_depr = to_number(#{is_depr})
		,
		</if>
		depr_method = #{depr_method}
		,
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		acc_depre_amount = to_number(#{acc_depre_amount})
		,
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		is_manage_depre = to_number(#{is_manage_depre})
		,
		</if>
		manage_depr_method = #{manage_depr_method}
		,
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		manage_depre_amount = to_number(#{manage_depre_amount})
		,
		</if>
		<if test="is_measure != null and is_measure != ''">
		is_measure = to_number(#{is_measure})
		,
		</if>
		<if test="is_throw != null and is_throw != ''">
		is_throw = to_number(#{is_throw})
		,
		</if>
		<if test="pact_code != null and pact_code != ''">
		pact_code = #{pact_code}
		,
		</if>
		<if test="ins_money != null and ins_money != ''">
		ins_money = to_number(#{ins_money})
		,
		</if>
		<if test="ins_date != null and ins_date != ''">
		ins_date = to_date (#{ins_date},'YYYY-MM-DD')
		,
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		accept_emp = to_number(#{accept_emp})
		,
		</if>
		<if test="accept_date != null and accept_date != ''">
		accept_date = to_date (#{accept_date},'YYYY-MM-DD')
		,
		</if>
		<if test="service_date != null and service_date != ''">
		service_date = to_date (#{service_date},'YYYY-MM-DD')
		,
		</if>
		ass_seq_no = #{ass_seq_no}
		,
		location = #{location}
		,
		note = #{note}
		,
		<if test="ass_in_no != null and ass_in_no != ''">
		ass_in_no = #{ass_in_no}
		,
		</if>
		<if test="in_date != null and in_date != ''">
		in_date = to_date (#{in_date},'YYYY-MM-DD')
		,
		</if>
		<if test="run_date != null and run_date != ''">
		run_date = to_date (#{run_date},'YYYY-MM-DD')
		,
		</if>
		<if test="is_bar != null and is_bar != ''">
		is_bar = to_number(#{is_bar})
		,
		</if>
		<if test="bar_type != null and bar_type != ''">
		bar_type = to_number(#{bar_type})
		,
		</if>
		bar_code = #{bar_code}
		,
		bar_url = #{bar_url}
		,
			<if test="book_amount != null and book_amount != ''">
		book_amount = to_number(#{book_amount})
		,
		</if>
			<if test="relic_amount != null and relic_amount != ''">
		relic_amount = to_number(#{relic_amount})
		,
		</if>
			<if test="relic_grade_code != null and relic_grade_code != ''">
		relic_grade_code = #{relic_grade_code}
		,
		</if>
		<if test="is_init != null and is_init != ''">
		is_init = to_number(#{is_init})
		,
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		dispose_type = to_number(#{dispose_type})
		,
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		dispose_cost = to_number(#{dispose_cost})
		,
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		dispose_income = to_number(#{dispose_income})
		,
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		dispose_tax = to_number(#{dispose_tax})
		,
		</if>
		ass_purpose = #{ass_purpose}
		,
		<if test="proj_id != null and proj_id != ''">
		proj_id = to_number(#{proj_id})
		,
		</if>
		<if test="proj_no != null and proj_no != ''">
		proj_no = to_number(#{proj_no})
		,
		</if>
		<if test="dispose_date != null and dispose_date != ''">
		dispose_date = to_date (#{dispose_date},'YYYY-MM-DD')
		,
		</if>
		<if test="apply_date != null and apply_date != ''">
		apply_date = to_date (#{apply_date},'YYYY-MM-DD')
		,
		</if>
		<if test="add_depre_month != null and add_depre_month != ''">
		add_depre_month = to_number(#{add_depre_month})
		,
		</if>
		<if test="add_manage_month != null and add_manage_month != ''">
		add_manage_month = to_number(#{add_manage_month})
		,
		</if>
		<if test="reg_no != null and reg_no != ''">
		reg_no = #{reg_no}
		,
		</if>
		<if test="measure_type != null and measure_type != ''">
		measure_type = #{measure_type}
		,
		</if>
		<if test="measure_king_code != null and measure_king_code != ''">
		measure_king_code = #{measure_king_code}
		,
		</if>
		<if test="simple_name != null and simple_name != ''">
		simple_name = #{simple_name}
		,
		</if>
		<if test="production_date != null and production_date != ''">
		production_date = to_date (#{production_date},'YYYY-MM-DD')
		,
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		proc_store_id = to_number(#{proc_store_id})
		,
		</if>
		<if test="proc_store_no != null and proc_store_no != ''">
		proc_store_no = to_number(#{proc_store_no})
		,
		</if>
		<if test="common_name != null and common_name != ''">
		common_name = #{common_name}
		,
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		six_type_code = #{six_type_code}
		,
		</if>
		</trim>
		where                     
			group_id = #{group_id}
			AND hos_id = #{hos_id}
			AND copy_code = #{copy_code}
			AND ass_card_no = #{ass_card_no}
 
	</update>
	
	
	<update id="updateBatch" parameterType="java.util.List">
	
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ASS_CARD_OTHER 
			<trim prefix="SET"  suffixOverrides=","> 
				<if test="item.simple_name != null and item.simple_name != ''">
				simple_name = #{item.simple_name,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.contract_code != null and item.contract_code != ''">
				contract_code = #{item.contract_code,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.file_number != null and item.file_number != ''">
				file_number = #{item.file_number,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.ass_seq_no != null and item.ass_seq_no != ''">
				ass_seq_no = #{item.ass_seq_no,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.ven_id != null and item.ven_id != ''">
				ven_id = #{item.ven_id}
				,
				</if>
				<if test="item.ven_no != null and item.ven_no != ''">
				ven_no = #{item.ven_no}
				,
				</if>
				<if test="item.fac_id != null and item.fac_id != ''">
				fac_id = #{item.fac_id}
				,
				</if>
				<if test="item.fac_no != null and item.fac_no != ''">
				fac_no = #{item.fac_no}
				,
				</if>
				<if test="item.accept_emp != null and item.accept_emp != ''">
				accept_emp = #{item.accept_emp}
				,
				</if>
				<if test="item.service_date != null and item.service_date != ''">
				service_date = to_date(#{item.service_date},'YYYY-MM-DD')
				,
				</if>
				<if test="item.common_name != null and item.common_name != ''">
				common_name = #{item.common_name,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.reg_no != null and item.reg_no != ''">
				reg_no = #{item.reg_no,jdbcType=VARCHAR}
				,
				</if>
				<if test="item.six_type_code != null and item.six_type_code != ''">
				six_type_code = #{item.six_type_code,jdbcType=VARCHAR}
				,
				</if>
			</trim>
			<where>                     
				AND group_id = #{item.group_id,jdbcType=INTEGER}
				AND hos_id = #{item.hos_id,jdbcType=INTEGER}
				AND copy_code = #{item.copy_code,jdbcType=VARCHAR}
				AND ass_card_no = #{item.ass_card_no,jdbcType=VARCHAR}
			</where>  			
		</foreach>
	</update>
	
	
	<!-- 采购入库和其他入库入库确认 -->
	<update id="updateConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				in_date = to_date(#{item.in_date},'YYYY-MM-DD'),
				use_state = 1
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_in_no = #{item.ass_in_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 采购退库和其他退库确认 -->
	<update id="updateBackConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 7,
				dispose_date = to_date(#{item.dispose_date},'YYYY-MM-DD')
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 资产调拨确认 -->
	<update id="updateSellOutConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 7,
				dispose_date = to_date(#{item.dispose_date},'YYYY-MM-DD'),
				dispose_income = #{item.dispose_income},
				dispose_tax = #{item.dispose_tax}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 科室领用 确认-->
	<update id="updateDeptGetOutConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				is_dept = 1,
				run_date = to_date(#{item.run_date},'YYYY-MM-DD'),
				dept_id = #{item.dept_id},
				dept_no = #{item.dept_no}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	

	
	
	<!-- 科室退库 确认-->
	<update id="updateDeptBackOutConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				is_dept = 0,
				store_id = #{item.store_id},
				store_no = #{item.store_no},
				dept_id = #{item.dept_id},
				dept_no = #{item.dept_no}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 仓库转移确认 -->
	<update id="updateTranStoreConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				store_id = #{item.store_id},
				store_no = #{item.store_no},
				dept_id = #{item.dept_id},
				dept_no = #{item.dept_no},
				move_date = sysdate
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 科室转移确认 -->
	<update id="updateTranDeptConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dept_id = #{item.dept_id},
				dept_no = #{item.dept_no},
				move_date = sysdate
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 原值变动 -->
	<update id="updatePriceConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				price = #{item.price},
				cur_money = #{item.price} - nvl(depre_money,0),
				change_price = nvl(change_price,0) + #{item.change_price}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 累计折旧变动 -->
	<update id="updateDepreMoneyConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				depre_money = nvl(#{item.new_depre},0),
				cur_money = nvl(price,0) - nvl(#{item.new_depre},0),
				change_depre = nvl(change_depre,0) + #{item.change_depre}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 更新条码是否打印过-->
	<update id="updateIsBarPrint" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				is_bar_print = #{item.is_bar_print}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	
	<delete id="delete" parameterType="java.util.Map">
	
		DELETE FROM ass_card_Other 
		<where>                     
		AND group_id = #{group_id}
		AND hos_id = #{hos_id}
		AND copy_code = #{copy_code}
		AND ass_card_no = #{ass_card_no}
		</where>  
	</delete>
	<delete id="deleteBatch" parameterType="java.util.List">
		DELETE FROM ass_card_Other 
		<where>
			<foreach collection="list" index="index" item="item" open="(" separator="or" close=")">
				group_id = #{item.group_id}
				AND hos_id = #{item.hos_id}
				AND copy_code = #{item.copy_code}
				AND ass_card_no = #{item.ass_card_no}
			</foreach>
	    </where>  
	</delete>
	
	<delete id="deleteBatchByAssInNo" parameterType="java.util.List">
		DELETE FROM ass_card_Other 
		<where>
			<foreach collection="list" index="index" item="item" open="(" separator="or" close=")">
				group_id = #{item.group_id}
				AND hos_id = #{item.hos_id}
				AND copy_code = #{item.copy_code}
				AND ass_in_no = #{item.ass_in_no}
				<if test="item.ass_id != null and item.ass_id != ''">
				AND ass_id = #{item.ass_id}
				</if>
				<if test="item.ass_no != null and item.ass_no != ''">
				AND ass_no = #{item.ass_no}
				</if>
			</foreach>
	    </where>  
	</delete>
	
	<select id="queryCardExistsByAssInNo" parameterType="java.util.Map" resultType="java.lang.Integer">
		select count(1) from ASS_CARD_Other 
		   where 	group_id = #{group_id}
				AND hos_id = #{hos_id}
				AND copy_code = #{copy_code}
				AND ass_in_no = #{ass_in_no}
				<if test="ass_id != null and ass_id != ''">
				AND ass_id = #{ass_id}
				</if>
				<if test="ass_no != null and ass_no != ''">
				AND ass_no = #{ass_no}
				</if>
				<if test="ass_spec != null and ass_spec != ''">
				AND ass_spec = #{ass_spec}
				</if>
				<if test="ass_mondl != null and ass_mondl != ''">
				AND ass_mondl = #{ass_mondl}
				</if>
	</select>
	
	<select id="query" parameterType="java.util.Map" resultMap="assCardOther" >
		select * from (
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.contract_code,
			a.file_number,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,
			a.relic_amount,
			a.relic_grade_code,
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			cert.cert_inv_name reg_no_name,
			a.is_bar_print,
		    case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		    a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join ass_type_dict atd on
	    ad.group_id = atd.group_id
	    and ad.hos_id = atd.hos_id
	    and ad.copy_code = atd.copy_code
	    and ad.ass_type_id = atd.ass_type_id
	    and atd.is_stop = 0  
	    
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
		
		left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join ASS_CERT_MAIN cert on
	    a.group_id = cert.group_id
	    and a.hos_id = cert.hos_id
	    and a.copy_code = cert.copy_code
	    and a.reg_no = cert.cert_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
	    
		<where>                     
			AND a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
		<if test="user_id != null and user_id != ''">
			and exists (
				select 1
				from v_user_data_perm b
				where a.group_id = b.group_id
					and a.hos_id = b.hos_id
					and to_char(a.dept_id) = b.perm_code
					and user_id = #{user_id,jdbcType= INTEGER}
					and TABLE_CODE = upper('HOS_DEPT_DICT')
					and (b.is_read = 1
						or b.is_write = 1)
			)
			and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and b.is_read = 1
          	)
          	
          	and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and b.is_read = 1
          	)
		</if>	
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = to_number(#{ass_id})
		</if>
		<if test="file_number != null and file_number != ''">
		AND a.file_number = #{file_number}
		</if>
		<if test="contract_code != null and contract_code != ''">
		AND a.contract_code = #{contract_code}
		</if>
		<if test="price_beg != null and price_beg != ''">
		AND a.price &gt;= #{price_beg}
		</if>
		<if test="price_end != null and price_end != ''">
		AND a.price  &lt;= #{price_end}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = to_number(#{ass_no})
		</if>
		<if test="ass_type_id != null and ass_type_id != ''">
		AND atd.ass_type_id = to_number(#{ass_type_id})
		</if>
		<if test="fina_type_code != null and fina_type_code != ''">
		AND atd.acc_type_code = #{fina_type_code}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code like '%${gb_code}%'
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = to_number(#{ven_id})
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = to_number(#{is_dept})
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = to_number(#{dept_id})
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = to_number(#{store_id})
		</if>
		<if test="price != null and price != '' and price != '0' and price != 0">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = to_number(#{use_state})
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = to_number(#{is_depr})
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = to_number(#{is_measure})
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location like '%${location}%'
		</if>
		<if test="note != null and note != ''">
		AND a.note like '%${note}%'
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date_beg != null and in_date_beg != ''">
		AND a.in_date &gt;= to_date(#{in_date_beg},'YYYY-MM-DD')
		</if>
		<if test="in_date_end != null and in_date_end != ''">
		AND a.in_date &lt;= to_date(#{in_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date_beg != null and run_date_beg != '' ">
		AND a.run_date &gt;= to_date(#{run_date_beg},'YYYY-MM-DD')
		</if>
		<if test="run_date_end != null and run_date_end != ''">
		AND a.run_date &lt;= to_date(#{run_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code like '%${bar_code}%'
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = to_number(#{dispose_type})
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		<if test="proj_id != null and proj_id != ''">
		AND a.proj_id = to_number(#{proj_id})
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		AND a.ass_purpose = #{ass_purpose}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND (
			upper(a.ass_card_no) like upper('%${ass_card_no}%')
			or ad.ass_name like '%${ass_card_no}%'
			or ad.spell_code like '%${ass_card_no}%'
		)
		</if>
		<if test="is_low != null and is_low != '' and is_low == 1">
		AND a.ass_card_no like 'ZCKPDZ%'
		</if>
		<if test="is_low != null and is_low != '' and is_low == 0">
		AND a.ass_card_no not like 'ZCKPDZ%'
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND (a.ass_ori_card_no like upper('%${ass_ori_card_no}%') or a.ass_ori_card_no like lower('%${ass_ori_card_no}%'))
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		AND a.is_bar_print = #{is_bar_print}
		</if>
		<if test="simple_name != null and simple_name != ''">
		AND a.simple_name like '%${simple_name}%'
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		AND a.proc_store_id = to_number(#{proc_store_id})
		</if>
		<if test="common_name != null and common_name != ''">
		AND a.common_name like '%${common_name}%'
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		AND a.six_type_code = #{six_type_code}
		</if>
		</where>   
		union all
		
		SELECT 
			null group_id,
			null hos_id,
			null copy_code,
			'合计' ass_card_no,
			null ass_ori_card_no,
			null ass_id,
			null ass_no,
			null ass_id_code,
		  null ass_id_name,
			null gb_code,
			null gb_code_name,
			null ass_spec,
			null ass_mondl,
			null ass_brand,
			null ass_amount,
			null unit_code,
			null unit_code_name,
			null fac_no,
			null fac_id,
			null fac_id_code,
		  null fac_id_name,
			null ven_id,
			null ven_no,
			null ven_id_code,
		  null ven_id_name,
			null is_dept,
			null is_dept_name,
			null dept_id,
			null dept_no,
			null dept_id_code,
		  null dept_id_name,
			null store_id,
			null store_no,
			null store_id_code,
		  null store_id_name,
			sum(a.price) price,
			sum(a.depre_money) depre_money,
			sum(a.manage_depre_money) manage_depre_money,
			sum(a.cur_money) cur_money,
			sum(a.fore_money) fore_money,
			null buy_type,
			null buy_type_name,
			null use_state,
			null use_state_name,
			null is_depr,
			null is_depr_name,
			null depr_method,
			null depr_method_name,
			null acc_depre_amount,
			null is_manage_depre,
			null is_manage_depre_name,
			null manage_depr_method,
			null manage_depr_method_name,
			null manage_depre_amount,
			null is_measure,
			null is_measure_name,
			null is_throw,
			null is_throw_name,
			null pact_code,
			null contract_code,
			null file_number,
			sum(a.ins_money) ins_money,
			null ins_date,
			null accept_emp,
			null accept_emp_name,
			null accept_date,
			null service_date,
			null ass_seq_no,
			null location,
			null note,
			null ass_in_no,
			null in_date,
			null run_date,
			null is_bar,
			null is_bar_name,
		      null bar_type,
		      null bar_type_name,
		      null bar_code,
		      null bar_url,
		      null book_amount,
		      null relic_amount,
		      null relic_grade_code,
		      null is_init,
		      null is_init_name,
		      null dispose_type,
		      null dispose_type_name,  
		      sum(a.dispose_cost) dispose_cost,  
		      sum(a.dispose_income) dispose_income,
		      sum(a.dispose_tax) dispose_tax,
		      null proj_id,
		      null proj_no,
		      null proj_id_code,
		      null proj_id_name,
		      null ass_purpose,
		      null ass_purpose_name,
		      null dispose_date,
		      null apply_date,
		      null add_depre_month,
		      null add_manage_month,
		      null reg_no,
		      null reg_no_name,
		      null is_bar_print,
		      null is_bar_print_name,
		      null measure_type,
		      null measure_type_name,
		      null measure_king_code,
		      null measure_king_code_name,
		      null simple_name,
		  	  null production_date,
		      null move_date,
			  null proc_store_id,
			  null proc_store_no,
			  null proc_store_id_code,
		      null proc_store_id_name,
		      null common_name,
		      null six_type_code,
		      null six_type_code_name
    	FROM ASS_CARD_Other a
    	left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join ass_type_dict atd on
	    ad.group_id = atd.group_id
	    and ad.hos_id = atd.hos_id
	    and ad.copy_code = atd.copy_code
	    and ad.ass_type_id = atd.ass_type_id
	    and atd.is_stop = 0 
		<where>                     
			AND a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
			<if test="user_id != null and user_id != ''">
				and exists (
						select 1
						from v_user_data_perm b
						where a.group_id = b.group_id
							and a.hos_id = b.hos_id
							and to_char(a.dept_id) = b.perm_code
							and user_id = #{user_id,jdbcType= INTEGER}
							and TABLE_CODE = upper('HOS_DEPT_DICT')
							and (b.is_read = 1
								or b.is_write = 1)
					)
				and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and b.is_read = 1
          	)	
          	
          	and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and b.is_read = 1
          	)
			</if>
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = to_number(#{ass_id})
		</if>
		<if test="file_number != null and file_number != ''">
		AND a.file_number = #{file_number}
		</if>
		<if test="contract_code != null and contract_code != ''">
		AND a.contract_code = #{contract_code}
		</if>
		<if test="price_beg != null and price_beg != ''">
		AND a.price &gt;= #{price_beg}
		</if>
		<if test="price_end != null and price_end != ''">
		AND a.price  &lt;= #{price_end}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = to_number(#{ass_no})
		</if>
		<if test="ass_type_id != null and ass_type_id != ''">
		AND atd.ass_type_id = to_number(#{ass_type_id})
		</if>
		<if test="fina_type_code != null and fina_type_code != ''">
		AND atd.acc_type_code = #{fina_type_code}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code like '%${gb_code}%'
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = to_number(#{ven_id})
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = to_number(#{is_dept})
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = to_number(#{dept_id})
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = to_number(#{store_id})
		</if>
		<if test="price != null and price != '' and price != '0' and price != 0">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = to_number(#{use_state})
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = to_number(#{is_depr})
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = to_number(#{is_measure})
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location like '%${location}%'
		</if>
		<if test="note != null and note != ''">
		AND a.note like '%${note}%'
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date_beg != null and in_date_beg != ''">
		AND a.in_date &gt;= to_date(#{in_date_beg},'YYYY-MM-DD')
		</if>
		<if test="in_date_end != null and in_date_end != ''">
		AND a.in_date &lt;= to_date(#{in_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date_beg != null and run_date_beg != '' ">
		AND a.run_date &gt;= to_date(#{run_date_beg},'YYYY-MM-DD')
		</if>
		<if test="run_date_end != null and run_date_end != ''">
		AND a.run_date &lt;= to_date(#{run_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code like '%${bar_code}%'
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = to_number(#{dispose_type})
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		<if test="proj_id != null and proj_id != ''">
		AND a.proj_id = to_number(#{proj_id})
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		AND a.ass_purpose = #{ass_purpose}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND (
			upper(a.ass_card_no) like upper('%${ass_card_no}%')
			or ad.ass_name like '%${ass_card_no}%'
			or ad.spell_code like '%${ass_card_no}%'
		)
		</if>
		<if test="is_low != null and is_low != '' and is_low == 1">
		AND a.ass_card_no like 'ZCKPDZ%'
		</if>
		<if test="is_low != null and is_low != '' and is_low == 0">
		AND a.ass_card_no not like 'ZCKPDZ%'
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND (a.ass_ori_card_no like upper('%${ass_ori_card_no}%') or a.ass_ori_card_no like lower('%${ass_ori_card_no}%'))
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		AND a.is_bar_print = #{is_bar_print}
		</if>
		<if test="simple_name != null and simple_name != ''">
		AND a.simple_name like '%${simple_name}%'
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		AND a.proc_store_id = to_number(#{proc_store_id})
		</if>
		<if test="common_name != null and common_name != ''">
		AND a.common_name like '%${common_name}%'
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		AND a.six_type_code = #{six_type_code}
		</if>
		</where>  ) t
		
		order by t.ass_card_no desc
	</select>
	<select id="queryPrint" parameterType="java.util.Map" resultMap="assCardOtherMap" >
		select * from (
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.contract_code,
			a.file_number,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,
			a.relic_amount,
			a.relic_grade_code,
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			cert.cert_inv_name reg_no_name,
			a.is_bar_print,
		    case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		    a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join ass_type_dict atd on
	    ad.group_id = atd.group_id
	    and ad.hos_id = atd.hos_id
	    and ad.copy_code = atd.copy_code
	    and ad.ass_type_id = atd.ass_type_id
	    and atd.is_stop = 0  
	    
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
		
		left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join ASS_CERT_MAIN cert on
	    a.group_id = cert.group_id
	    and a.hos_id = cert.hos_id
	    and a.copy_code = cert.copy_code
	    and a.reg_no = cert.cert_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
	    
		<where>                     
			AND a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
		<if test="user_id != null and user_id != ''">
			and exists (
				select 1
				from v_user_data_perm b
				where a.group_id = b.group_id
					and a.hos_id = b.hos_id
					and to_char(a.dept_id) = b.perm_code
					and user_id = #{user_id,jdbcType= INTEGER}
					and TABLE_CODE = upper('HOS_DEPT_DICT')
					and (b.is_read = 1
						or b.is_write = 1)
			)
			and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and b.is_read = 1
          	)
          	
          	and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and b.is_read = 1
          	)
		</if>	
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = to_number(#{ass_id})
		</if>
		<if test="file_number != null and file_number != ''">
		AND a.file_number = #{file_number}
		</if>
		<if test="contract_code != null and contract_code != ''">
		AND a.contract_code = #{contract_code}
		</if>
		<if test="price_beg != null and price_beg != ''">
		AND a.price &gt;= #{price_beg}
		</if>
		<if test="price_end != null and price_end != ''">
		AND a.price  &lt;= #{price_end}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = to_number(#{ass_no})
		</if>
		<if test="ass_type_id != null and ass_type_id != ''">
		AND atd.ass_type_id = to_number(#{ass_type_id})
		</if>
		<if test="fina_type_code != null and fina_type_code != ''">
		AND atd.acc_type_code = #{fina_type_code}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code like '%${gb_code}%'
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = to_number(#{ven_id})
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = to_number(#{is_dept})
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = to_number(#{dept_id})
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = to_number(#{store_id})
		</if>
		<if test="price != null and price != '' and price != '0' and price != 0">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = to_number(#{use_state})
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = to_number(#{is_depr})
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = to_number(#{is_measure})
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location like '%${location}%'
		</if>
		<if test="note != null and note != ''">
		AND a.note like '%${note}%'
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date_beg != null and in_date_beg != ''">
		AND a.in_date &gt;= to_date(#{in_date_beg},'YYYY-MM-DD')
		</if>
		<if test="in_date_end != null and in_date_end != ''">
		AND a.in_date &lt;= to_date(#{in_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date_beg != null and run_date_beg != '' ">
		AND a.run_date &gt;= to_date(#{run_date_beg},'YYYY-MM-DD')
		</if>
		<if test="run_date_end != null and run_date_end != ''">
		AND a.run_date &lt;= to_date(#{run_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code like '%${bar_code}%'
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = to_number(#{dispose_type})
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		<if test="proj_id != null and proj_id != ''">
		AND a.proj_id = to_number(#{proj_id})
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		AND a.ass_purpose = #{ass_purpose}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND (
			upper(a.ass_card_no) like upper('%${ass_card_no}%')
			or ad.ass_name like '%${ass_card_no}%'
			or ad.spell_code like '%${ass_card_no}%'
		)
		</if>
		<if test="is_low != null and is_low != '' and is_low == 1">
		AND a.ass_card_no like 'ZCKPDZ%'
		</if>
		<if test="is_low != null and is_low != '' and is_low == 0">
		AND a.ass_card_no not like 'ZCKPDZ%'
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND (a.ass_ori_card_no like upper('%${ass_ori_card_no}%') or a.ass_ori_card_no like lower('%${ass_ori_card_no}%'))
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		AND a.is_bar_print = #{is_bar_print}
		</if>
		<if test="simple_name != null and simple_name != ''">
		AND a.simple_name like '%${simple_name}%'
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		AND a.proc_store_id = to_number(#{proc_store_id})
		</if>
		<if test="common_name != null and common_name != ''">
		AND a.common_name like '%${common_name}%'
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		AND a.six_type_code = #{six_type_code}
		</if>
		</where>   
		union all
		
		SELECT 
			null group_id,
			null hos_id,
			null copy_code,
			'合计' ass_card_no,
			null ass_ori_card_no,
			null ass_id,
			null ass_no,
			null ass_id_code,
		  null ass_id_name,
			null gb_code,
			null gb_code_name,
			null ass_spec,
			null ass_mondl,
			null ass_brand,
			null ass_amount,
			null unit_code,
			null unit_code_name,
			null fac_no,
			null fac_id,
			null fac_id_code,
		  null fac_id_name,
			null ven_id,
			null ven_no,
			null ven_id_code,
		  null ven_id_name,
			null is_dept,
			null is_dept_name,
			null dept_id,
			null dept_no,
			null dept_id_code,
		  null dept_id_name,
			null store_id,
			null store_no,
			null store_id_code,
		  null store_id_name,
			sum(a.price) price,
			sum(a.depre_money) depre_money,
			sum(a.manage_depre_money) manage_depre_money,
			sum(a.cur_money) cur_money,
			sum(a.fore_money) fore_money,
			null buy_type,
			null buy_type_name,
			null use_state,
			null use_state_name,
			null is_depr,
			null is_depr_name,
			null depr_method,
			null depr_method_name,
			null acc_depre_amount,
			null is_manage_depre,
			null is_manage_depre_name,
			null manage_depr_method,
			null manage_depr_method_name,
			null manage_depre_amount,
			null is_measure,
			null is_measure_name,
			null is_throw,
			null is_throw_name,
			null pact_code,
			null contract_code,
			null file_number,
			sum(a.ins_money) ins_money,
			null ins_date,
			null accept_emp,
			null accept_emp_name,
			null accept_date,
			null service_date,
			null ass_seq_no,
			null location,
			null note,
			null ass_in_no,
			null in_date,
			null run_date,
			null is_bar,
			null is_bar_name,
		      null bar_type,
		      null bar_type_name,
		      null bar_code,
		      null bar_url,
		      null book_amount,
		      null relic_amount,
		      null relic_grade_code,
		      null is_init,
		      null is_init_name,
		      null dispose_type,
		      null dispose_type_name,  
		      sum(a.dispose_cost) dispose_cost,  
		      sum(a.dispose_income) dispose_income,
		      sum(a.dispose_tax) dispose_tax,
		      null proj_id,
		      null proj_no,
		      null proj_id_code,
		      null proj_id_name,
		      null ass_purpose,
		      null ass_purpose_name,
		      null dispose_date,
		      null apply_date,
		      null add_depre_month,
		      null add_manage_month,
		      null reg_no,
		      null reg_no_name,
		      null is_bar_print,
		      null is_bar_print_name,
		      null measure_type,
		      null measure_type_name,
		      null measure_king_code,
		      null measure_king_code_name,
		      null simple_name,
		  	  null production_date,
		      null move_date,
			  null proc_store_id,
			  null proc_store_no,
			  null proc_store_id_code,
		      null proc_store_id_name,
		      null common_name,
		      null six_type_code,
		      null six_type_code_name
    	FROM ASS_CARD_Other a
    	left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join ass_type_dict atd on
	    ad.group_id = atd.group_id
	    and ad.hos_id = atd.hos_id
	    and ad.copy_code = atd.copy_code
	    and ad.ass_type_id = atd.ass_type_id
	    and atd.is_stop = 0 
		<where>                     
			AND a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
			<if test="user_id != null and user_id != ''">
				and exists (
						select 1
						from v_user_data_perm b
						where a.group_id = b.group_id
							and a.hos_id = b.hos_id
							and to_char(a.dept_id) = b.perm_code
							and user_id = #{user_id,jdbcType= INTEGER}
							and TABLE_CODE = upper('HOS_DEPT_DICT')
							and (b.is_read = 1
								or b.is_write = 1)
					)
				and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(ad.ass_type_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('ass_type_dict')
				and b.is_read = 1
          	)	
          	
          	and exists (
				select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and  b.is_write = 1
				
	          	union all
	          	
	          	select 1 from v_user_data_perm b where
				a.group_id=b.group_id 
				and a.hos_id=b.hos_id 
				and to_char(a.proc_store_id) = b.perm_code
				and user_id=#{user_id}
				AND TABLE_CODE = upper('hos_store_dict')
				and b.is_read = 1
          	)
			</if>
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = to_number(#{ass_id})
		</if>
		<if test="file_number != null and file_number != ''">
		AND a.file_number = #{file_number}
		</if>
		<if test="contract_code != null and contract_code != ''">
		AND a.contract_code = #{contract_code}
		</if>
		<if test="price_beg != null and price_beg != ''">
		AND a.price &gt;= #{price_beg}
		</if>
		<if test="price_end != null and price_end != ''">
		AND a.price  &lt;= #{price_end}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = to_number(#{ass_no})
		</if>
		<if test="ass_type_id != null and ass_type_id != ''">
		AND atd.ass_type_id = to_number(#{ass_type_id})
		</if>
		<if test="fina_type_code != null and fina_type_code != ''">
		AND atd.acc_type_code = #{fina_type_code}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code like '%${gb_code}%'
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = to_number(#{ven_id})
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = to_number(#{is_dept})
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = to_number(#{dept_id})
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = to_number(#{store_id})
		</if>
		<if test="price != null and price != '' and price != '0' and price != 0">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = to_number(#{use_state})
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = to_number(#{is_depr})
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = to_number(#{is_measure})
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location like '%${location}%'
		</if>
		<if test="note != null and note != ''">
		AND a.note like '%${note}%'
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date_beg != null and in_date_beg != ''">
		AND a.in_date &gt;= to_date(#{in_date_beg},'YYYY-MM-DD')
		</if>
		<if test="in_date_end != null and in_date_end != ''">
		AND a.in_date &lt;= to_date(#{in_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date_beg != null and run_date_beg != '' ">
		AND a.run_date &gt;= to_date(#{run_date_beg},'YYYY-MM-DD')
		</if>
		<if test="run_date_end != null and run_date_end != ''">
		AND a.run_date &lt;= to_date(#{run_date_end},'YYYY-MM-DD')
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code like '%${bar_code}%'
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = to_number(#{dispose_type})
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		<if test="proj_id != null and proj_id != ''">
		AND a.proj_id = to_number(#{proj_id})
		</if>
		<if test="ass_purpose != null and ass_purpose != ''">
		AND a.ass_purpose = #{ass_purpose}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND (
			upper(a.ass_card_no) like upper('%${ass_card_no}%')
			or ad.ass_name like '%${ass_card_no}%'
			or ad.spell_code like '%${ass_card_no}%'
		)
		</if>
		<if test="is_low != null and is_low != '' and is_low == 1">
		AND a.ass_card_no like 'ZCKPDZ%'
		</if>
		<if test="is_low != null and is_low != '' and is_low == 0">
		AND a.ass_card_no not like 'ZCKPDZ%'
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND (a.ass_ori_card_no like upper('%${ass_ori_card_no}%') or a.ass_ori_card_no like lower('%${ass_ori_card_no}%'))
		</if>
		<if test="is_bar_print != null and is_bar_print != ''">
		AND a.is_bar_print = #{is_bar_print}
		</if>
		<if test="simple_name != null and simple_name != ''">
		AND a.simple_name like '%${simple_name}%'
		</if>
		<if test="proc_store_id != null and proc_store_id != ''">
		AND a.proc_store_id = to_number(#{proc_store_id})
		</if>
		<if test="common_name != null and common_name != ''">
		AND a.common_name like '%${common_name}%'
		</if>
		<if test="six_type_code != null and six_type_code != ''">
		AND a.six_type_code = #{six_type_code}
		</if>
		</where>  ) t
		
		order by t.ass_card_no desc
	</select>
	<select id="queryByCode" resultMap="assCardOther"  parameterType="java.util.Map" >
	
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.contract_code,
			a.file_number,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,
			a.relic_amount,
			a.relic_grade_code,
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			cert.cert_inv_name reg_no_name,
			  a.is_bar_print,
		      case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		      a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name 
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
	    
	    left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join ASS_CERT_MAIN cert on
	    a.group_id = cert.group_id
	    and a.hos_id = cert.hos_id
	    and a.copy_code = cert.copy_code
	    and a.reg_no = cert.cert_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
	    
		WHERE 
		a.group_id = #{group_id,jdbcType=INTEGER}   and 
		a.hos_id = #{hos_id,jdbcType=INTEGER}   and 
		a.copy_code = #{copy_code,jdbcType=VARCHAR}   and 
		a.ass_card_no = #{ass_card_no,jdbcType=VARCHAR} 
	
	</select>
	<select id="queryByUniqueness" resultMap="assCardOther"  parameterType="java.util.Map" >
	
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,                                                                                                                                
            a.relic_amount,                                                                                                                               
            a.relic_grade_code,   
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			  a.is_bar_print,
		      case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		      a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date ,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name     
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_id su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
	    
	    left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join ASS_CERT_MAIN cert on
	    a.group_id = cert.group_id
	    and a.hos_id = cert.hos_id
	    and a.copy_code = cert.copy_code
	    and a.reg_no = cert.cert_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
	    
		<where>                     
		<if test="group_id != null and group_id != ''">
		AND a.group_id = #{group_id}
		</if>
		<if test="hos_id != null and hos_id != ''">
		AND a.hos_id = #{hos_id}
		</if>
		<if test="copy_code != null and copy_code != ''">
		AND a.copy_code = #{copy_code}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND a.ass_card_no = #{ass_card_no}
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND a.ass_ori_card_no = #{ass_ori_card_no}
		</if>
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = #{ass_id}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = #{ass_no}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code = #{gb_code}
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_no != null and fac_no != ''">
		AND a.fac_no = #{fac_no}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = #{ven_id}
		</if>
		<if test="ven_no != null and ven_no != ''">
		AND a.ven_no = #{ven_no}
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = #{is_dept}
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = #{dept_id}
		</if>
		<if test="dept_no != null and dept_no != ''">
		AND a.dept_no = #{dept_no}
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = #{store_id}
		</if>
		<if test="store_no != null and store_no != ''">
		AND a.store_no = #{store_no}
		</if>
		<if test="price != null and price != ''">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = #{use_state}
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = #{is_depr}
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = #{is_measure}
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location = #{location}
		</if>
		<if test="note != null and note != ''">
		AND a.note = #{note}
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date != null and in_date != ''">
		AND a.in_date = #{in_date}
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code = #{bar_code}
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = #{dispose_type}
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		</where>   
		order by a.ass_card_no asc
	</select>
	<select id="queryExists" resultMap="assCardOther"  parameterType="java.util.Map" >
	
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,                                                                                                                                
            a.relic_amount,                                                                                                                               
            a.relic_grade_code,
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			  a.is_bar_print,
		      case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		      a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name   
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
	    
	    left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
		<where>                     
		<if test="group_id != null and group_id != ''">
		AND a.group_id = #{group_id}
		</if>
		<if test="hos_id != null and hos_id != ''">
		AND a.hos_id = #{hos_id}
		</if>
		<if test="copy_code != null and copy_code != ''">
		AND a.copy_code = #{copy_code}
		</if>
		<if test="ass_card_no != null and ass_card_no != ''">
		AND a.ass_card_no = #{ass_card_no}
		</if>
		<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
		AND a.ass_ori_card_no = #{ass_ori_card_no}
		</if>
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = #{ass_id}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = #{ass_no}
		</if>
		<if test="gb_code != null and gb_code != ''">
		AND a.gb_code = #{gb_code}
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
		<if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		<if test="ass_brand != null and ass_brand != ''">
		AND a.ass_brand = #{ass_brand}
		</if>
		<if test="ass_amount != null and ass_amount != ''">
		AND a.ass_amount = #{ass_amount}
		</if>
		<if test="unit_code != null and unit_code != ''">
		AND a.unit_code = #{unit_code}
		</if>
		<if test="fac_no != null and fac_no != ''">
		AND a.fac_no = #{fac_no}
		</if>
		<if test="fac_id != null and fac_id != ''">
		AND a.fac_id = #{fac_id}
		</if>
		<if test="ven_id != null and ven_id != ''">
		AND a.ven_id = #{ven_id}
		</if>
		<if test="ven_no != null and ven_no != ''">
		AND a.ven_no = #{ven_no}
		</if>
		<if test="is_dept != null and is_dept != ''">
		AND a.is_dept = #{is_dept}
		</if>
		<if test="dept_id != null and dept_id != ''">
		AND a.dept_id = #{dept_id}
		</if>
		<if test="dept_no != null and dept_no != ''">
		AND a.dept_no = #{dept_no}
		</if>
		<if test="store_id != null and store_id != ''">
		AND a.store_id = #{store_id}
		</if>
		<if test="store_no != null and store_no != ''">
		AND a.store_no = #{store_no}
		</if>
		<if test="price != null and price != ''">
		AND a.price = #{price}
		</if>
		<if test="depre_money != null and depre_money != ''">
		AND a.depre_money = #{depre_money}
		</if>
		<if test="manage_depre_money != null and manage_depre_money != ''">
		AND a.manage_depre_money = #{manage_depre_money}
		</if>
		<if test="cur_money != null and cur_money != ''">
		AND a.cur_money = #{cur_money}
		</if>
		<if test="fore_money != null and fore_money != ''">
		AND a.fore_money = #{fore_money}
		</if>
		<if test="buy_type != null and buy_type != ''">
		AND a.buy_type = #{buy_type}
		</if>
		<if test="use_state != null and use_state != ''">
		AND a.use_state = #{use_state}
		</if>
		<if test="is_depr != null and is_depr != ''">
		AND a.is_depr = #{is_depr}
		</if>
		<if test="depr_method != null and depr_method != ''">
		AND a.depr_method = #{depr_method}
		</if>
		<if test="acc_depre_amount != null and acc_depre_amount != ''">
		AND a.acc_depre_amount = #{acc_depre_amount}
		</if>
		<if test="is_manage_depre != null and is_manage_depre != ''">
		AND a.is_manage_depre = #{is_manage_depre}
		</if>
		<if test="manage_depr_method != null and manage_depr_method != ''">
		AND a.manage_depr_method = #{manage_depr_method}
		</if>
		<if test="manage_depre_amount != null and manage_depre_amount != ''">
		AND a.manage_depre_amount = #{manage_depre_amount}
		</if>
		<if test="is_measure != null and is_measure != ''">
		AND a.is_measure = #{is_measure}
		</if>
		<if test="is_throw != null and is_throw != ''">
		AND a.is_throw = #{is_throw}
		</if>
		<if test="pact_code != null and pact_code != ''">
		AND a.pact_code = #{pact_code}
		</if>
		<if test="ins_money != null and ins_money != ''">
		AND a.ins_money = #{ins_money}
		</if>
		<if test="ins_date != null and ins_date != ''">
		AND a.ins_date = #{ins_date}
		</if>
		<if test="accept_emp != null and accept_emp != ''">
		AND a.accept_emp = #{accept_emp}
		</if>
		<if test="accept_date != null and accept_date != ''">
		AND a.accept_date = #{accept_date}
		</if>
		<if test="service_date != null and service_date != ''">
		AND a.service_date = #{service_date}
		</if>
		<if test="ass_seq_no != null and ass_seq_no != ''">
		AND a.ass_seq_no = #{ass_seq_no}
		</if>
		<if test="location != null and location != ''">
		AND a.location = #{location}
		</if>
		<if test="note != null and note != ''">
		AND a.note = #{note}
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="in_date != null and in_date != ''">
		AND a.in_date = #{in_date}
		</if>
		<if test="run_date != null and run_date != ''">
		AND a.run_date = #{run_date}
		</if>
		<if test="is_bar != null and is_bar != ''">
		AND a.is_bar = #{is_bar}
		</if>
		<if test="bar_type != null and bar_type != ''">
		AND a.bar_type = #{bar_type}
		</if>
		<if test="bar_code != null and bar_code != ''">
		AND a.bar_code = #{bar_code}
		</if>
		<if test="bar_url != null and bar_url != ''">
		AND a.bar_url = #{bar_url}
		</if>
		<if test="book_amount != null and book_amount != ''">
		AND a.book_amount = #{book_amount}
		</if>
		<if test="relic_amount != null and relic_amount != ''">
		AND a.relic_amount = #{relic_amount}
		</if>
		<if test="relic_grade_code != null and relic_grade_code != ''">
		AND a.relic_grade_code = #{relic_grade_code}
		</if>
		<if test="is_init != null and is_init != ''">
		AND a.is_init = #{is_init}
		</if>
		<if test="dispose_type != null and dispose_type != ''">
		AND a.dispose_type = #{dispose_type}
		</if>
		<if test="dispose_cost != null and dispose_cost != ''">
		AND a.dispose_cost = #{dispose_cost}
		</if>
		<if test="dispose_income != null and dispose_income != ''">
		AND a.dispose_income = #{dispose_income}
		</if>
		<if test="dispose_tax != null and dispose_tax != ''">
		AND a.dispose_tax = #{dispose_tax}
		</if>
		</where>   
		order by a.ass_card_no asc
	</select>
	
	<select id="queryByAssInNo" resultMap="assCardOtherMap"  parameterType="java.util.Map" >
	
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.book_amount,                                                                                                                                
            a.relic_amount,                                                                                                                               
            a.relic_grade_code,   
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			  a.is_bar_print,
		      case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		      a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.simple_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name        
		FROM ASS_CARD_Other a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
	    
	    left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
		<where>                     
		AND a.group_id = #{group_id}
		AND a.hos_id = #{hos_id}
		AND a.copy_code = #{copy_code}
		and a.use_state !=  6
  		and a.use_state !=  7
		<if test="ass_card_no != null and ass_card_no != ''">
		AND a.ass_card_no = #{ass_card_no}
		</if>
		<if test="ass_in_no != null and ass_in_no != ''">
		AND a.ass_in_no = #{ass_in_no}
		</if>
		<if test="ass_id != null and ass_id != ''">
		AND a.ass_id = #{ass_id}
		</if>
		<if test="ass_no != null and ass_no != ''">
		AND a.ass_no = #{ass_no}
		</if>
		<if test="ass_spec != null and ass_spec != ''">
		AND a.ass_spec = #{ass_spec}
		</if>
	    <if test="ass_mondl != null and ass_mondl != ''">
		AND a.ass_mondl = #{ass_mondl}
		</if>
		</where>   
		order by a.ass_card_no asc
	</select>
	
	<!-- 资产处置申报确认 -->
	<update id="updateDisposalApplyConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 6,
				apply_date = to_date(#{item.apply_date},'YYYY-MM-DD')
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	<!-- 资产处置申报取消确认 -->
	<update id="updateDisposalApplyUnConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = null,
				use_state = 1,
				apply_date = null
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 资产处置记录确认 -->
	<update id="updateDisposalRecordConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 7,
				dispose_date = to_date(#{item.dispose_date},'YYYY-MM-DD'),
				dispose_cost = #{item.dispose_cost,jdbcType=INTEGER},
				dispose_income = #{item.dispose_income,jdbcType=INTEGER},
				dispose_tax = #{item.dispose_tax,jdbcType=INTEGER}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 资产处置记录取消确认 -->
	<update id="updateDisposalRecordUnConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = null,
				use_state = 1,
				dispose_date = null,
				dispose_cost = null,
				dispose_income = null,
				dispose_tax = null
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
		<!--资产改造申报 确认-->
	<update id="updateAssRemouldAOtherConfirmState" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				use_state= '6',
				dispose_type='51'
				where                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
		</foreach>
	</update>
		<!-- 改造记录确认 -->
	<update id="updateRemouldROtherConfirm" parameterType="java.util.Map">
	<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_other set
				dispose_type = '51',
				use_state = 7<!-- ,
				dispose_date = to_date(#{item.dispose_date},'yyyy-MM-dd') -->
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
				</foreach>
	</update>
		<!-- 改造竣工确认 -->
	<update id="updateRemouldFOtherConfirm" parameterType="java.util.Map">
	<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = '51',
				use_state = 7,
				dispose_date = to_date(#{item.dispose_date},'yyyy-MM-dd')
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
				</foreach>
	</update>
	<!-- 资产盘亏申报确认 -->
	<update id="updateChkApplyConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 6,
				apply_date = to_date(#{item.apply_date},'YYYY-MM-DD')
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	
	<!-- 资产盘亏记录确认 -->
	<update id="updateChkRecordConfirm" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ass_card_Other set
				dispose_type = #{item.dispose_type},
				use_state = 7,
				dispose_date = to_date(#{item.dispose_date},'YYYY-MM-DD')
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
	<!-- 维修确认 -->
	<update id="updateAssCardStateByCardNo" parameterType="java.util.Map">
			UPDATE ass_card_Other set
				use_state = 2
				<where>                     
					group_id = #{group_id}
					AND hos_id = #{hos_id}
					AND copy_code = #{copy_code}
					AND ass_card_no = #{ass_card_no}
				</where> 
	</update>
	<!-- 维修记录确认派工 -->
	<update id="updateAssCardStateByRecCardNo" parameterType="java.util.Map">
			UPDATE ass_card_other set
				use_state = #{use_state}
				<where>                     
					group_id = #{group_id}
					AND hos_id = #{hos_id}
					AND copy_code = #{copy_code}
					AND ass_card_no = #{ass_card_no}
				</where> 
	</update>
	
	<select id="queryAssCardOtherPrint" resultType="java.util.Map" parameterType="java.util.Map">
		select a.ass_card_no id,
			       a.ass_card_no,
			       a.ass_ori_card_no,
			       ad.ass_code,
			       ad.ass_name ass_id,
			       a.ass_spec,
			       a.ass_mondl,
			       a.ass_brand,
			       hu.unit_name unit_code,
			       hfd.fac_name fac_id,
			       hfd.fac_code,
			       hsd.sup_name ven_id,
			       hsd.sup_code ven_code,
			       pact_code,
			       abtd.bus_type_name buy_type,
			       abtd.bus_type_code,
			       to_char(a.ins_date, 'yyyy-mm-dd') ins_date,
			       to_char(a.ins_money, 'FM999,999,990.00') ins_money,
			       su.user_name accept_emp,
			       a.accept_date,
			       a.ass_in_no,
			       to_char(a.in_date, 'yyyy-mm-dd') in_date,
			       to_char(a.run_date, 'yyyy-mm-dd') run_date,
			       case
			         when a.is_dept = 0 then
			          '在库'
			         when a.is_dept = 1 then
			          '在用'
			         else
			          ''
			       end is_dept,
			       htd.store_code,
			       htd.store_name store_id,
			       hdd.dept_code,
			       hdd.dept_name dept_id,
			       a.ass_seq_no,
			       aud.equi_usage_code,
			       aud.equi_usage_name ass_purpose,
			       hpd.proj_code,
			       hpd.proj_name proj_id,
			       a.location,
			       case
			         when a.is_measure = 0 then
			          '否'
			         when a.is_measure = 1 then
			          '是'
			         else
			          ''
			       end is_measure,
			       case
			         when a.is_throw = 0 then
			          '否'
			         when a.is_throw = 1 then
			          '是'
			         else
			          ''
			       end is_throw,
			       case
			         when a.is_bar = 0 then
			          '否'
			         when a.is_bar = 1 then
			          '是'
			         else
			          ''
			       end is_bar,
			       case
			         when a.bar_type = 0 then
			          '一维条码'
			         when a.bar_type = 2 then
			          '二维条码'
			         else
			          ''
			       end bar_type,
			       a.bar_code,
			       case
			         when a.is_depr = 0 then
			          '否'
			         when a.is_depr = 1 then
			          '是'
			         else
			          ''
			       end is_depr,
			       admd1.ass_depre_code,
			       admd1.ass_depre_name depr_method,
			       a.acc_depre_amount,
			       case
			         when a.is_manage_depre = 0 then
			          '否'
			         when a.is_manage_depre = 1 then
			          '是'
			         else
			          ''
			       end is_manage_depre,
			       admd2.ass_depre_code,
			       admd2.ass_depre_name manage_depr_method,
			       a.manage_depre_amount,
			       to_char(a.price, 'FM999,999,990.00') price,
			       to_char(a.depre_money, 'FM999,999,990.00') depre_money,
			       to_char(a.manage_depre_money, 'FM999,999,990.00') manage_depre_money,
			       to_char(a.cur_money, 'FM999,999,990.00') cur_money,
			       to_char(a.fore_money, 'FM999,999,990.00') fore_money,
			       a.add_depre_month,
			       a.add_manage_month,
			       case
			         when a.is_init = 0 then
			          '否'
			         when a.is_init = 1 then
			          '是'
			         else
			          ''
			       end is_init,
			       to_char(a.service_date, 'yyyy-mm-dd') service_date,
			       a.gb_code,
			       acus.state_code,
			       acus.state_name use_state,
			       adt.dispose_type_code,
			       adt.dispose_type_name dispose_type,
			       to_char(a.apply_date, 'yyyy-mm-dd') apply_date,
			       to_char(a.dispose_date, 'yyyy-mm-dd') dispose_date,
			       to_char(a.dispose_cost, 'FM999,999,990.00') dispose_cost,
			       to_char(a.dispose_income, 'FM999,999,990.00') dispose_income,
			       to_char(a.dispose_tax, 'FM999,999,990.00') dispose_tax,
			       a.note,
			       a.book_amount,
			       a.relic_amount,
			       a.relic_grade_code,
			       cert.CERT_INV_NAME reg_no,
			       a.file_number,
			       a.contract_code,
			       hs.source_name,
			       hdd.dept_name,
			       su1.user_name as create_emp,
			       su2.emp_name as purc_emp,
			      to_char(al.create_date, 'yyyy-mm-dd') as create_date,td.ass_type_name,hdd.dept_code||''||hdd.dept_name dept_names,to_char(a.price, 'FM999,999,990.00') as prices,
			      a.production_date,
			      a.common_name
			  from ass_card_other a
			
			  left join ass_no_dict ad
			    on a.group_id = ad.group_id
			   and a.hos_id = ad.hos_id
			   and a.copy_code = ad.copy_code
			   and a.ass_id = ad.ass_id
			   and ad.is_stop = 0
			
			  left join hos_unit hu
			    on a.group_id = hu.group_id
			   and a.hos_id = hu.hos_id
			   and a.unit_code = hu.unit_code
			
			  left join hos_fac_dict hfd
			    on a.group_id = hfd.group_id
			   and a.hos_id = hfd.hos_id
			   and a.fac_id = hfd.fac_id
			   and hfd.is_stop = 0
			
			  left join hos_sup_dict hsd
			    on a.group_id = hsd.group_id
			   and a.hos_id = hsd.hos_id
			   and a.ven_id = hsd.sup_id
			   and hsd.is_stop = 0
			
			  left join hos_dept_dict hdd
			    on a.group_id = hdd.group_id
			   and a.hos_id = hdd.hos_id
			   and a.dept_id = hdd.dept_id
			   and hdd.is_stop = 0
			
			  left join hos_store_dict htd
			    on a.group_id = htd.group_id
			   and a.hos_id = htd.hos_id
			   and a.store_id = htd.store_id
			   and htd.is_stop = 0
			
			  left join ass_bus_type_dict abtd
			    on a.group_id = abtd.group_id
			   and a.hos_id = abtd.hos_id
			   and a.copy_code = abtd.copy_code
			   and a.buy_type = abtd.bus_type_code
			   and abtd.is_stop = 0
			
			  left join ass_card_use_state acus
			    on a.use_state = acus.state_code
			   and acus.is_stop = 0
			
			  left join ass_depre_method_dict admd1
			    on a.depr_method = admd1.ass_depre_code
			   and admd1.is_stop = 0
			
			  left join ass_depre_method_dict admd2
			    on a.manage_depr_method = admd2.ass_depre_code
			   and admd2.is_stop = 0
			
			  left join ass_dispose_type adt
			    on a.dispose_type = adt.dispose_type_code
			   and adt.is_stop = 0
			
			  left join hos_emp_dict su
			    on a.group_id = su.group_id
			   and a.hos_id = su.hos_id
			   and a.accept_emp = su.emp_id
			   and su.is_stop = 0
			
			  left join hos_proj_dict hpd
			    on a.group_id = hpd.group_id
			   and a.hos_id = hpd.hos_id
			   and a.proj_id = hpd.proj_id
			   and hpd.is_stop = 0
			
			  left join ass_usage_dict aud
			    on a.group_id = aud.group_id
			   and a.hos_id = aud.hos_id
			   and a.copy_code = aud.copy_code
			   and a.ass_purpose = aud.equi_usage_code
			  left join ass_resource_other rs
			    on rs.group_id = a.group_id
			   and rs.hos_id = a.hos_id
			   and rs.copy_code = a.copy_code
			   and rs.ass_card_no = a.ass_card_no
			
			  left join hos_source hs
			    on hs.group_id = rs.group_id
			   and hs.hos_id = rs.hos_id
			   and hs.source_id = rs.source_id
			   and hs.is_stop = 0
			  left join (select group_id,
			                    hos_id,
			                    copy_code,
			                    ass_in_no,
			                    create_emp,
			                    purc_emp,
			                    create_date
			               from ASS_IN_MAIN_other
			             union all
			             select group_id,
			                    hos_id,
			                    copy_code,
			                    ass_in_no,
			                    create_emp,
			                    null purc_emp,
			                    create_date
			               from ass_in_rest_main_other
			             union all
			             select group_id,
			                    hos_id,
			                    copy_code,
			                    allot_in_no as ass_in_no,
			                    create_emp,
			                    null        purc_emp,
			                    create_date
			               from ASS_ALLOT_IN_other
			             union all
			             select group_id,
			                    hos_id,
			                    copy_code,
			                    sell_in_no  as ass_in_no,
			                    create_emp,
			                    null        purc_emp,
			                    create_date
			               from ass_sell_in_other
			             union all
			             select group_id,
			                    hos_id,
			                    copy_code,
			                    ass_in_no,
			                    create_emp,
			                    null purc_emp,
			                    create_date
			               from ASS_CHK_IN_MAIN_other) al
			    on al.group_id = a.group_id
			   and al.hos_id = a.hos_id
			   and al.copy_code = a.copy_code
			   and al.ass_in_no = a.ass_in_no
			  left join sys_user su1
			    on al.group_id = su1.group_id
			   and al.hos_id = su1.hos_id
			   and al.create_emp = su1.user_id
			  left join hos_emp_dict su2
			    on al.group_id = su2.group_id
			   and al.hos_id = su2.hos_id
			   and al.purc_emp = su2.emp_id
	    		left join ASS_DICT  addd
				  on addd.group_id = a.group_id
				  and addd.hos_id = a.hos_id
				  and addd.copy_code = a.copy_code
				  and addd.ass_id = a.ass_id
				  and addd.is_stop = 0
				  left join ASS_TYPE_DICT td
				  on td.group_id = addd.group_id
				  and td.hos_id = addd.hos_id
				  and td.copy_code = addd.copy_code
				  and td.ass_type_id = addd.ass_type_id
				  
				  left join ASS_CERT_MAIN cert on
				    a.group_id = cert.group_id
				    and a.hos_id = cert.hos_id
				    and a.copy_code = cert.copy_code
				    and a.reg_no = cert.cert_code
				  
	    where a.group_id = #{group_id}
					AND a.hos_id = #{hos_id}
					AND a.copy_code = #{copy_code}
					<if test="is_list == true">
						AND a.ass_card_no in (${ass_card_nos})
					</if>
					<if test="is_list == false">
						AND a.ass_card_no = #{ass_card_no}
					</if>
		order by a.ass_card_no desc 			
	</select>
	<select id="queryByAssCardOldNo" parameterType="java.util.Map" resultMap="assCardOther" >
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.ass_ori_card_no,
			a.ass_id,
			a.ass_no,
			ad.ass_code ass_id_code,
		    ad.ass_name ass_id_name,
			a.gb_code,
			a.gb_code||' '||agd.gb_name gb_code_name,
			a.ass_spec,
			a.ass_mondl,
			a.ass_brand,
			a.ass_amount,
			a.unit_code,
			hu.unit_name unit_code_name,
			a.fac_no,
			a.fac_id,
			hfd.fac_code fac_id_code,
		    hfd.fac_name fac_id_name,
			a.ven_id,
			a.ven_no,
			hsd.sup_code ven_id_code,
		    hsd.sup_name ven_id_name,
			a.is_dept,
			case when a.is_dept = 0 then '在库' when a.is_dept = 1 then '在用' else '' end is_dept_name,
			a.dept_id,
			a.dept_no,
			hdd.dept_code dept_id_code,
		    hdd.dept_name dept_id_name,
			a.store_id,
			a.store_no,
			htd.store_code store_id_code,
		    htd.store_name store_id_name,
			a.price,
			a.depre_money,
			a.manage_depre_money,
			a.cur_money,
			a.fore_money,
			a.buy_type,
			abtd.bus_type_name buy_type_name,
			a.use_state,
			acus.state_name use_state_name,
			a.is_depr,
			case when a.is_depr = 0  then '否' when a.is_depr = 1 then '是' else '' end is_depr_name,
			a.depr_method,
			admd1.ass_depre_name depr_method_name,
			a.acc_depre_amount,
			a.is_manage_depre,
			case when a.is_manage_depre = 0 then '否' when a.is_manage_depre = 1 then '是' else '' end is_manage_depre_name,
			a.manage_depr_method,
			admd2.ass_depre_name manage_depr_method_name,
			a.manage_depre_amount,
			a.is_measure,
			case when a.is_measure  = 0 then '否' when a.is_measure  = 1 then '是' else '' end is_measure_name,
			a.is_throw,
			case when a.is_throw  = 0 then '否' when a.is_throw  = 1 then '是' else '' end is_throw_name,
			a.pact_code,
			a.ins_money,
			a.ins_date,
			a.accept_emp,
			su.emp_name accept_emp_name,
			a.accept_date,
			a.service_date,
			a.ass_seq_no,
			a.location,
			a.note,
			a.ass_in_no,
			a.in_date,
			a.run_date,
			a.is_bar,
			case when a.is_bar = 0 then '否' when a.is_bar = 1 then '是' else '' end is_bar_name,
			a.bar_type,
			case when a.bar_type = 1 then '一维条码' when a.bar_type = 2 then '二维条码' else '' end bar_type_name,
			a.bar_code,
			a.bar_url,
			a.is_init,
			case when a.is_init = 0 then '否' when a.is_init = 1 then '是' else '' end is_init_name,
			a.dispose_type,
			a.adt.dispose_type_name dispose_type_name,  
			a.dispose_cost,  
			a.dispose_income,
			a.dispose_tax,
			a.proj_id,
			a.proj_no,
			hpd.proj_code proj_id_code,
			hpd.proj_name proj_id_name,
			a.ass_purpose,
			aud.equi_usage_name ass_purpose_name,
			a.dispose_date,
			a.apply_date,
			a.add_depre_month,
			a.add_manage_month,
			a.reg_no,
			  a.is_bar_print,
		      case when a.is_bar_print = 0 then '否' when a.is_bar_print = 1 then '是' else '' end is_bar_print_name,
		      a.measure_type,
		      case when a.measure_type = 0 then 'A类' when a.measure_type = 1 then 'B类' when a.measure_type = 2 then 'C类' else '' end measure_type_name,
		      a.measure_king_code,
		      amkd.measure_king_name measure_king_code_name,
		      a.production_date,
		      a.move_date,
			a.proc_store_id,
			a.proc_store_no,
			htd_proc.store_code proc_store_id_code,
		    htd_proc.store_name proc_store_id_name,
		    a.common_name,
		    a.six_type_code,
		    ats.type_name six_type_code_name 
		FROM ASS_CARD_OTHER a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join ass_type_dict atd on
	    ad.group_id = atd.group_id
	    and ad.hos_id = atd.hos_id
	    and ad.copy_code = atd.copy_code
	    and ad.ass_type_id = atd.ass_type_id
	    and atd.is_stop = 0  
	    
	    
	    left join hos_unit hu on
	    a.group_id = hu.group_id
	    and a.hos_id = hu.hos_id
	    and a.unit_code = hu.unit_code  
	    
	    left join hos_fac_dict hfd on
	    a.group_id = hfd.group_id
	    and a.hos_id = hfd.hos_id
	    and a.fac_id = hfd.fac_id
	    and hfd.is_stop = 0  
	    
	    left join hos_sup_dict hsd on
	    a.group_id = hsd.group_id
	    and a.hos_id = hsd.hos_id
	    and a.ven_id = hsd.sup_id
	    and hsd.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
	    
	    left join hos_store_dict htd on
	    a.group_id = htd.group_id
	    and a.hos_id = htd.hos_id
	    and a.store_id = htd.store_id
	    and htd.is_stop = 0  
	    
	    left join ass_bus_type_dict abtd on
	    a.group_id = abtd.group_id
	    and a.hos_id = abtd.hos_id
	    and a.copy_code = abtd.copy_code
	    and a.buy_type = abtd.bus_type_code
	    and abtd.is_stop = 0  
	    
	    left join ass_card_use_state acus on
	    a.use_state = acus.state_code
	    and acus.is_stop = 0
	    
	    left join ass_depre_method_dict admd1 on
	    a.depr_method = admd1.ass_depre_code
	    and admd1.is_stop = 0
	    
	    left join ass_depre_method_dict admd2 on
	    a.manage_depr_method = admd2.ass_depre_code
	    and admd2.is_stop = 0
	    
	    left join ass_dispose_type adt on
	    a.dispose_type = adt.dispose_type_code
	    and adt.is_stop = 0
	    
	    left join hos_emp_dict su on
	    a.group_id = su.group_id
	    and a.hos_id = su.hos_id
		and a.accept_emp = su.emp_id
		and su.is_stop = 0
		
		left join hos_proj_dict hpd on
		a.group_id = hpd.group_id
	    and a.hos_id = hpd.hos_id
	    and a.proj_id = hpd.proj_id
	    and hpd.is_stop = 0  
	    
	    left join ass_usage_dict aud on
	    a.group_id = aud.group_id
	    and a.hos_id = aud.hos_id
	    and a.copy_code = aud.copy_code
	    and a.ass_purpose = aud.equi_usage_code
	    
	    left join ass_gb_dict agd on
	    a.gb_code = agd.gb_code
	    
	    left join ass_measure_king_dict amkd on
	    a.group_id = amkd.group_id
	    and a.hos_id = amkd.hos_id
	    and a.copy_code = amkd.copy_code
	    and a.measure_king_code = amkd.measure_king_code
	    
	    left join hos_store_dict htd_proc on
	    a.group_id = htd_proc.group_id
	    and a.hos_id = htd_proc.hos_id
	    and a.proc_store_id = htd_proc.store_id
	    and htd_proc.is_stop = 0
	    
	    left join ASS_TYPE_SIXEIGHT ats on
	    a.group_id = ats.group_id
	    and a.hos_id = ats.hos_id
	    and a.copy_code = ats.copy_code
	    and a.six_type_code = ats.type_code
		
		<where>                     
			AND a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
			<if test="ass_ori_card_no != null and ass_ori_card_no != ''">
			AND a.ass_card_no = #{ass_ori_card_no}
			</if>
		</where>   
	
	</select>
	
	<select id="queryAssCardOtherPrintCode" resultType="java.util.Map"  parameterType="java.util.Map" >
		select 
				a.ass_card_no id,
				a.ass_card_no,
				ad.ass_code,
				ad.ass_name ass_id,
				a.ass_spec||' '||a.ass_mondl ass_spec_mondl,
				a.ass_in_no,
				a.in_date,
				a.run_date,
				hdd.dept_code,
				hdd.dept_name dept_id,
				a.ass_seq_no,
				a.production_date
		from ASS_CARD_OTHER a
		
		left join ass_no_dict ad on
	    a.group_id = ad.group_id
	    and a.hos_id = ad.hos_id
	    and a.copy_code = ad.copy_code
	    and a.ass_id = ad.ass_id
	    and ad.is_stop = 0  
	    
	    left join hos_dept_dict hdd on
	    a.group_id = hdd.group_id
	    and a.hos_id = hdd.hos_id
	    and a.dept_id = hdd.dept_id
	    and hdd.is_stop = 0  
		
		where a.group_id = #{group_id}
					AND a.hos_id = #{hos_id}
					AND a.copy_code = #{copy_code}
					<if test="is_list == true">
						AND a.ass_card_no in (${ass_card_nos})
					</if>
					<if test="is_list == false">
						AND a.ass_card_no = #{ass_card_no}
					</if>
	</select>
	
	<select id="queryCount"  parameterType="java.util.Map" resultMap="assCardOther">
		select a.use_state from ass_card_Other a
		where
		<if test="group_id != null and group_id != ''">
		a.group_id = #{group_id}
		</if>
		<if test="hos_id != null and hos_id != ''">
		AND a.hos_id = #{hos_id}
		</if>
		<if test="copy_code != null and copy_code != ''">
		AND a.copy_code = #{copy_code}
		</if>
		<if test="ass_in_nos != null and ass_in_nos != ''">
			AND a.ass_in_no in (
			<foreach collection="ass_in_nos" item="item" index="index" separator=",">
		        #{item}
		      </foreach>
		      )
		    </if>
	
	</select>
	
	
	<select id="queryLowOtherCard" parameterType="java.util.Map" resultMap="assCardOther" >
		SELECT 
			a.group_id,
			a.hos_id,
			a.copy_code,
			a.ass_card_no,
			a.store_id,
			a.store_no,
			a.dept_id,
			a.dept_no
			
		FROM ASS_CARD_Other a
	    
		where                    
			a.group_id = #{group_id}
			AND a.hos_id = #{hos_id}
			AND a.copy_code = #{copy_code}
			AND a.ass_card_no like 'ZCKPDZ%'
			AND a.is_dept = #{is_dept}
			AND a.ass_id  = #{ass_id}
			and rownum &lt;= ${amount}
		order by a.ass_card_no
	</select>
	
	
	<update id="updateBillState" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";" >
			UPDATE ASS_CARD_Other set
				bill_state = #{item.bill_state}
				<where>                     
					group_id = #{item.group_id}
					AND hos_id = #{item.hos_id}
					AND copy_code = #{item.copy_code}
					AND ass_card_no = #{item.ass_card_no}
				</where> 
		</foreach>
	</update>
</mapper>

