<?xml version="1.0" encoding="UTF-8" ?>
<root>

 <sql id="V_ACC_COOP_COST" type="view" desc="合作科室费用"><![CDATA[
	CREATE OR REPLACE VIEW V_ACC_COOP_COST AS
    SELECT 
    A.GROUP_ID,A.HOS_ID,A.COPY_CODE,
    A.SER_NUM BUSINESS_ID,
    A.SER_NUM BUSINESS_NO,
    A.PROJ_CODE SUB_TYPE_ID,
    T.PROJ_NAME PROJ_NAME,
    A.CREATE_DATE BUSI_DATE,
    A.COOP_TYPE,
    CASE A.COOP_TYPE WHEN 1 THEN '院内' ELSE '院外' END COOP_NAME,
    A.SM_MY AMOUNT_MONEY,
    A.USER_ID,
    U.USER_NAME,
    A.NOTE 
    FROM ACC_COOP_COST A
    LEFT JOIN ACC_COOP_PROJ T ON A.GROUP_ID=T.GROUP_ID AND A.HOS_ID=T.HOS_ID AND A.COPY_CODE=T.COPY_CODE 
    AND A.PROJ_CODE=T.PROJ_CODE
    LEFT JOIN SYS_USER U ON A.GROUP_ID=U.GROUP_ID AND A.HOS_ID=U.HOS_ID AND A.USER_ID=U.USER_ID 
    WHERE A.STATE=2
   	]]></sql>

  <sql id="V_ACC_PUB_COST_DETAIL" type="view" desc="合作科室费用明细"><![CDATA[
	CREATE OR REPLACE VIEW V_ACC_COOP_COST_DETAIL AS
    SELECT 
    A.GROUP_ID,A.HOS_ID,A.COPY_CODE,
    A.SER_NUM BUSINESS_ID,
    A.SER_NUM BUSINESS_NO,
    /*B.PROJ_CODE SUB_TYPE_ID,
    B.CREATE_DATE BUSI_DATE,
    B.COOP_TYPE,*/
    A.COOP_OBJ,
    A.DEPT_ID,
    A.DEPT_NO,
    A.CUS_ID,
    A.CUS_NO,
    A.SUP_ID,
    A.SUP_NO,
    A.FT_MY AMOUNT_MONEY,
    DT.OUT_CODE,
    A.NOTE 
    FROM ACC_COOP_COST_DETAIL A  
   /* INNER JOIN ACC_COOP_COST B ON A.GROUP_ID=B.GROUP_ID AND A.HOS_ID=B.HOS_ID AND A.COPY_CODE=B.COPY_CODE
    AND A.SER_NUM=B.SER_NUM
    LEFT JOIN HOS_DEPT_DICT T ON A.GROUP_ID=T.GROUP_ID AND A.HOS_ID=T.HOS_ID AND A.COPY_CODE=T.COPY_CODE 
    AND A.DEPT_ID=T.DEPT_ID AND A.DEPT_NO=T.DEPT_NO
    LEFT JOIN HOS_CUS_DICT C ON A.GROUP_ID=C.GROUP_ID AND A.HOS_ID=C.HOS_ID 
    AND A.CUS_ID=C.CUS_ID AND A.CUS_NO=C.CUS_NO 
    LEFT JOIN HOS_SUP_DICT S ON A.GROUP_ID=S.GROUP_ID AND A.HOS_ID=S.HOS_ID 
    AND A.SUP_ID=S.SUP_ID AND A.SUP_NO=S.SUP_NO */
    LEFT JOIN ACC_DEPT_ATTR DT ON A.GROUP_ID=DT.GROUP_ID AND A.HOS_ID=DT.HOS_ID AND A.DEPT_ID=DT.DEPT_ID
    
    
   	]]></sql>
   	
</root>

